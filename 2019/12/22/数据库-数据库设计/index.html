<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>数据库-数据库设计 | 至繁归于至简 - chph&#39;s blog | steve_chph personal website</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="数据库,数据库设计">
    <meta name="description" content="数据库 - 数据库设计 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   候选键和主键的微小区别：  候选键：区分当前表的不同行 主键：在其他表引用当前表时唯一标识表中的行的一个候选键">
<meta name="keywords" content="数据库,数据库设计">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库-数据库设计">
<meta property="og:url" content="http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/index.html">
<meta property="og:site_name" content="至繁归于至简 - chph&#39;s blog">
<meta property="og:description" content="数据库 - 数据库设计 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   候选键和主键的微小区别：  候选键：区分当前表的不同行 主键：在其他表引用当前表时唯一标识表中的行的一个候选键">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2019/12/22/AdlFXq4rBOGjThf.png">
<meta property="og:image" content="https://i.loli.net/2019/12/22/yeHPordXahWzq69.png">
<meta property="og:image" content="https://i.loli.net/2019/12/22/bPEFZCgrQe93yBk.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzdJFx.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzdtfK.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzwAje.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzwyDJ.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzD08P.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/Qz7zbd.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzbqXD.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/22/QzqZAs.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/FoItMcQ5L2XJSN4.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/1STFUhnHRYAOzM9.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/gNEvdq7a2eCfsno.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/PhU2OyNQHD1qs3I.png">
<meta property="og:image" content="https://media.geeksforgeeks.org/wp-content/uploads/20190520181337/Untitled-Diagram-231.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/6JjnoVqdNSGRzDs.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/hHYJc4X28KZdg1a.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/4Zb6xj182LUHNDn.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/SfMCXBpuDUrdhKN.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/XpsgFKuWlHoB4De.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/IXQ3grM1nbEfh8y.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/GjELySZ4bBm16Rq.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/MCuN3z87RBmYIrE.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/3yD1P6FMk5A2lcm.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/3yD1P6FMk5A2lcm.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/p1V5dKHogAql93B.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/VSQbEHqY2cgeCFz.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/O7LkaDWtBAMhYmo.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/ZBWcUq7ryfNC1da.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/MRpl72JcuG9Ntme.png">
<meta property="og:image" content="https://i.loli.net/2019/12/23/DwKz5fdVSP2pvxG.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/23/l91dtU.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/23/l91whF.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/23/l91HBt.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/4rWG8jMvEP751Hw.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/bzK7pmkhJM2er9G.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/cAa6KkWrEVzsuMC.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/Z8NHvuWxmABJKGD.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/vjfDouZ6K8M2PiO.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/sHvmf6TVSwxrWEU.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/oSLM3q784pNWQEF.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/irFUARCZoLpQWuI.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/15zMjJX2QLaCEYr.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/xf2ASa6YHLpG8Cz.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/9JmpYQZsAluo3HO.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/WqBF6vNzfUtDPlp.png">
<meta property="og:image" content="https://i.loli.net/2019/12/24/w5ZcB7hHqWkroF1.png">
<meta property="og:updated_time" content="2019-12-25T15:49:14.797Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库-数据库设计">
<meta name="twitter:description" content="数据库 - 数据库设计 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   候选键和主键的微小区别：  候选键：区分当前表的不同行 主键：在其他表引用当前表时唯一标识表中的行的一个候选键">
<meta name="twitter:image" content="https://i.loli.net/2019/12/22/AdlFXq4rBOGjThf.png">
    
        <link rel="alternate" type="application/atom+xml" title="至繁归于至简 - chph&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">steve_chph</h5>
          <a href="mailto:chph13420146901@gmail.com" title="chph13420146901@gmail.com" class="mail">chph13420146901@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/QQ876684433" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://107.182.188.221:23333/"  >
                <i class="icon icon-lg icon-link"></i>
                Project(HTTP)
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://107.182.188.221:23334/"  >
                <i class="icon icon-lg icon-demo"></i>
                Project(HTTPS)
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">数据库-数据库设计</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">数据库-数据库设计</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-12-22T11:18:08.000Z" itemprop="datePublished" class="page-time">
  2019-12-22
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/">数据库</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/笔记/">笔记</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#数据库-数据库设计"><span class="post-toc-number">1.</span> <span class="post-toc-text">数据库 - 数据库设计</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据库设计前言"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">数据库设计前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#E-R概念介绍"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">E-R概念介绍</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#E-R模型"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">E-R模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实体（entity）"><span class="post-toc-number">1.2.1.1.</span> <span class="post-toc-text">实体（entity）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#属性（attribute）"><span class="post-toc-number">1.2.1.2.</span> <span class="post-toc-text">属性（attribute）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#转换实体和属性到关系"><span class="post-toc-number">1.2.1.3.</span> <span class="post-toc-text">转换实体和属性到关系</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则1"><span class="post-toc-number">1.2.1.3.1.</span> <span class="post-toc-text">转换规则1</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则2"><span class="post-toc-number">1.2.1.3.2.</span> <span class="post-toc-text">转换规则2</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实体间联系"><span class="post-toc-number">1.2.1.4.</span> <span class="post-toc-text">实体间联系</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#E-R模型的细节"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">E-R模型的细节</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关系中实体参与的基数"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">关系中实体参与的基数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一对一、多对一、多对多关系"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">一对一、多对一、多对多关系</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将二元联系转化成关系"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">将二元联系转化成关系</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则3-N-N联系"><span class="post-toc-number">1.3.3.0.1.</span> <span class="post-toc-text">转换规则3 N-N联系</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则4-N-1联系"><span class="post-toc-number">1.3.3.0.2.</span> <span class="post-toc-text">转换规则4 N-1联系</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则5-1-1联系，可选参与"><span class="post-toc-number">1.3.3.0.3.</span> <span class="post-toc-text">转换规则5 1-1联系，可选参与</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#转换规则6-1-1联系，强制参与"><span class="post-toc-number">1.3.3.0.4.</span> <span class="post-toc-text">转换规则6 1-1联系，强制参与</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他E-R概念"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">其他E-R概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#属性的基数"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">属性的基数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#弱实体"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">弱实体</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#泛化层次"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">泛化层次</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#案例学习"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">案例学习</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#案例一"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">案例一</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概念模型"><span class="post-toc-number">1.5.1.1.</span> <span class="post-toc-text">概念模型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#关系模式"><span class="post-toc-number">1.5.1.2.</span> <span class="post-toc-text">关系模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#案例二"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">案例二</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概念模型-1"><span class="post-toc-number">1.5.2.1.</span> <span class="post-toc-text">概念模型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#关系模式-1"><span class="post-toc-number">1.5.2.2.</span> <span class="post-toc-text">关系模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#案例三"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">案例三</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概念模型-2"><span class="post-toc-number">1.5.3.1.</span> <span class="post-toc-text">概念模型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#关系模式-2"><span class="post-toc-number">1.5.3.2.</span> <span class="post-toc-text">关系模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#案例四"><span class="post-toc-number">1.5.4.</span> <span class="post-toc-text">案例四</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概念模型-3"><span class="post-toc-number">1.5.4.1.</span> <span class="post-toc-text">概念模型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#关系模式-3"><span class="post-toc-number">1.5.4.2.</span> <span class="post-toc-text">关系模式</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#规范化"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">规范化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#范式"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">范式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#第一范式（1NF）"><span class="post-toc-number">1.6.1.1.</span> <span class="post-toc-text">第一范式（1NF）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#第三范式（3NF）"><span class="post-toc-number">1.6.1.2.</span> <span class="post-toc-text">第三范式（3NF）</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#异常操作"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">异常操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#更新异常（Update-Anomaly）"><span class="post-toc-number">1.6.2.1.</span> <span class="post-toc-text">更新异常（Update Anomaly）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#删除异常（Delete-Anomaly）"><span class="post-toc-number">1.6.2.2.</span> <span class="post-toc-text">删除异常（Delete Anomaly）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#插入异常（Insert-Anomaly）"><span class="post-toc-number">1.6.2.3.</span> <span class="post-toc-text">插入异常（Insert Anomaly）</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数依赖"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">函数依赖</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数依赖的逻辑蕴涵"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">函数依赖的逻辑蕴涵</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#包含规则"><span class="post-toc-number">1.7.1.1.</span> <span class="post-toc-text">包含规则</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#平凡依赖"><span class="post-toc-number">1.7.1.2.</span> <span class="post-toc-text">平凡依赖</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#阿姆斯特朗公理"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">阿姆斯特朗公理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数依赖集的闭包"><span class="post-toc-number">1.7.3.</span> <span class="post-toc-text">函数依赖集的闭包</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数依赖集的覆盖"><span class="post-toc-number">1.7.4.</span> <span class="post-toc-text">函数依赖集的覆盖</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#属性集的闭包"><span class="post-toc-number">1.7.5.</span> <span class="post-toc-text">属性集的闭包</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#最小覆盖"><span class="post-toc-number">1.7.6.</span> <span class="post-toc-text">最小覆盖</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#无损分解"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">无损分解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#无损分解-1"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">无损分解</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据库模式（Scheme）"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">数据库模式（Scheme）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多表的无损连接分解"><span class="post-toc-number">1.8.3.</span> <span class="post-toc-text">多表的无损连接分解</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#范式-1"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">范式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#依赖保持（FD-Preserved）"><span class="post-toc-number">1.9.1.</span> <span class="post-toc-text">依赖保持（FD Preserved）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#超键"><span class="post-toc-number">1.9.2.</span> <span class="post-toc-text">超键</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主属性（Primary-Attribute）"><span class="post-toc-number">1.9.3.</span> <span class="post-toc-text">主属性（Primary Attribute）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BCNF（Boyce-Codd-Normal-Form，修正的第三范式）"><span class="post-toc-number">1.9.4.</span> <span class="post-toc-text">BCNF（Boyce-Codd Normal Form，修正的第三范式）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3NF（Third-Normal-Form，第三范式）"><span class="post-toc-number">1.9.5.</span> <span class="post-toc-text">3NF（Third Normal Form，第三范式）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2NF（Second-Normal-Form，第二范式）"><span class="post-toc-number">1.9.6.</span> <span class="post-toc-text">2NF（Second Normal Form，第二范式）</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-数据库-数据库设计"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">数据库-数据库设计</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-12-22 19:18:08" datetime="2019-12-22T11:18:08.000Z"  itemprop="datePublished">2019-12-22</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/">数据库</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/笔记/">笔记</a></li></ul></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="数据库-数据库设计"><a href="#数据库-数据库设计" class="headerlink" title="数据库 - 数据库设计"></a>数据库 - 数据库设计</h1><blockquote>
<p>参考资料：</p>
<ul>
<li>南大软件学院课程《数据管理基础》课程资料</li>
<li>《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著</li>
</ul>
</blockquote>
<p>候选键和主键的微小区别：</p>
<ul>
<li>候选键：区分当前表的不同行</li>
<li>主键：在其他表引用当前表时唯一标识表中的行的一个候选键</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/22/AdlFXq4rBOGjThf.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>表的键的正确性描述是由数据库系统维护的</p>
<h2 id="数据库设计前言"><a href="#数据库设计前言" class="headerlink" title="数据库设计前言"></a>数据库设计前言</h2><p>Logical Database Design<br>➢also known as</p>
<ul>
<li>Database Design</li>
<li>Database Modeling</li>
</ul>
<p>如何进行数据库设计？</p>
<ul>
<li>analyze an enterprise</li>
<li>list the data items for a database</li>
<li>decide how to place these data items columns in relational tables</li>
</ul>
<p>案例：学生课程数据库（student-course database）</p>
<p>学生属性：sno, sname, dept, sage</p>
<p>课程属性：cno, cname</p>
<p>学生&amp;课程属性：grade</p>
<p>把这些属性全部放进同一张表中：<code>R(sno, sname, dept, sage, cno, cname, grade)</code>，结果如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/22/yeHPordXahWzq69.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>存在的问题有哪些？</p>
<ol>
<li><p>redundency（数据冗余）</p>
<p>相同的数据重复存储，造成磁盘空间的浪费</p>
<p><img src="https://i.loli.net/2019/12/22/bPEFZCgrQe93yBk.png" alt></p>
</li>
<li><p>abnormity of update（修改异常）</p>
<p>对于冗余存储的数据，如果需要修改的话，则需要修改所有重复存储的版本</p>
<ul>
<li>浪费时间</li>
<li>用户很容易操作出错</li>
</ul>
</li>
<li><p>abnormity of delete（删除异常）</p>
<p>可能会丢失一些有用的信息</p>
<p><img src="https://s2.ax1x.com/2019/12/22/QzdJFx.png" alt="QzdJFx.png"></p>
<p><img src="https://s2.ax1x.com/2019/12/22/QzdtfK.png" alt="QzdtfK.png"></p>
</li>
</ol>
<ol start="4">
<li><p>abnormity of insert（插入异常）</p>
<p>可能会插入失败，比如要添加新的学生信息，但是该学生目前尚未选任何课程，这时候就会出现插入异常</p>
</li>
</ol>
<p>因此一个比较好的设计方案是将SCG数据表拆分成多张表：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/22/QzwAje.png" alt="QzwAje.png" title>
                </div>
                <div class="image-caption">QzwAje.png</div>
            </figure>



<h2 id="E-R概念介绍"><a href="#E-R概念介绍" class="headerlink" title="E-R概念介绍"></a>E-R概念介绍</h2><p><strong>ER模型（Entity-Relationship model，实体关系模型）</strong>是用来描述数据库的抽象方法</p>
<img src="https://s2.ax1x.com/2019/12/22/QzwyDJ.png" alt="QzwyDJ.png" style="zoom:80%;">

<h3 id="E-R模型"><a href="#E-R模型" class="headerlink" title="E-R模型"></a>E-R模型</h3><p>三种基本的数据分类对象：</p>
<ul>
<li>实体</li>
<li>属性</li>
<li>关系</li>
</ul>
<h4 id="实体（entity）"><a href="#实体（entity）" class="headerlink" title="实体（entity）"></a>实体（entity）</h4><p>定义：实体是具有公共性质的可区分的现实世界对象的集合（An entity is a collection of distinguishable<br>real-world objects with common properties）</p>
<ul>
<li>通常一个实体会被映射成一张关系表，代表对象的集合</li>
<li>关系表中的每一行代表一个实体事件（entity occurrence）或者实体实例（entity instance），代表一个可区分的现实世界对象</li>
</ul>
<p>E-R图用<strong>矩形</strong>来代表实体</p>
<h4 id="属性（attribute）"><a href="#属性（attribute）" class="headerlink" title="属性（attribute）"></a>属性（attribute）</h4><p>定义：属性是描述<strong>实体</strong>或者<strong>关系</strong>的性质的数据项（An attribute is a data item that describes a<br>property of an entity or a relationship）；属于一个实体的所有实体实例具有共同的性质，这些性质就是属性</p>
<p><strong>复合属性</strong>：一组简单属性，用来共同描述一个性质</p>
<p><strong>多值属性</strong>：在<u><em>一个实体实例中</em></u>可以取多个值的属性</p>
<p><strong>标识符（identifier</strong>，类似于关系表中的候选键）：每个实体都有一个标识符，也就是一个属性或者一个属性集合，每个实体实例在这些属性上具有不同的值；实体的标识符可以包含复合属性</p>
<p><strong>主标识符（primary identifier</strong>，类似于关系表中的主键）：一个实体可以定义多个标识符，当数据库管理员选定一个单键属性作为整个数据库中实体实例的标识方法时，它就被称为实体的主标识符</p>
<p><strong>描述符（descriptor）</strong>：非标识符的属性是描述性属性，被称为描述符</p>
<p>E-R图的表示：</p>
<ul>
<li>简单单质属性用椭圆形表示，并用直线连接到实体</li>
<li>复合属性同样用椭圆形表示并连接到实体，同时组成复合属性的简单属性连接到复合属性上</li>
<li>多值属性用双线连接到它所描述的实体上（而不是单线）</li>
<li><strong>主标识符属性加下划线标识</strong></li>
</ul>
<p>具有实体和属性的E-R图例</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/22/QzD08P.png" alt="QzD08P.png" title>
                </div>
                <div class="image-caption">QzD08P.png</div>
            </figure>

<h4 id="转换实体和属性到关系"><a href="#转换实体和属性到关系" class="headerlink" title="转换实体和属性到关系"></a>转换实体和属性到关系</h4><h5 id="转换规则1"><a href="#转换规则1" class="headerlink" title="转换规则1"></a>转换规则1</h5><ul>
<li>每个实体映射到关系数据库中的一个表，并用实体名来命名这个表</li>
<li>表的列代表了连接到实体的所有简单单值属性（对于<strong>复合属性，本身不变成表的列</strong>，而是将复合属性所对应的多个简单单值属性映射为表的多个列）</li>
<li>实体的标识符映射为该表的候选键</li>
<li>实体的主标识符映射为该表的主键（主标识符可以是一个复合属性，所以它将变成关系表中的一个属性集合），主键加下划线表示</li>
<li>实体实例映射为该表中的行</li>
</ul>
<h5 id="转换规则2"><a href="#转换规则2" class="headerlink" title="转换规则2"></a>转换规则2</h5><p>对于实体E，主标识符是p，如果一个多值属性a在E-R图中连接到R，那么<strong>a映射成自身的一张表</strong>，该表按复数形式的多值属性名命名；这个新表的列用p和a命名（p或a都有可能由几个属性组成），<strong>表的行对应（p，a）值对</strong>，表示与E的实体实例关联的a的属性值对；这个<strong>表的主键属性是p和a中列的集合</strong></p>
<p>但是这个转换规则在对象-关系型数据库中是不成立的</p>
<h4 id="实体间联系"><a href="#实体间联系" class="headerlink" title="实体间联系"></a>实体间联系</h4><p>联系：给定m个实体的有序列表：E1、E2、…、Em（列表中同一实体可以出现多于一次），一个联系R定义了这些实体实例之间的对应规则；特别地R代表了一个m元组，它是笛卡尔积E1×E2×…×Em的子集</p>
<ul>
<li><p>联系可以有附加属性，它是每个联系实例的值（例如下图中percent代表了一个员工实例在该项目上的工作时间百分比）</p>
</li>
<li><p>联系一个实体到这个实体自身的二元联系（Ei×Ei的子集）叫做环，有时也叫做递归联系（recursive relationship）</p>
</li>
<li><p>三元关系：三个不同实体上的联系（甚至有更多元的关系，因此联系不是只能存在与两个实体之间）</p>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/22/Qz7zbd.png" alt="Qz7zbd.png" title>
                </div>
                <div class="image-caption">Qz7zbd.png</div>
            </figure>



<h2 id="E-R模型的细节"><a href="#E-R模型的细节" class="headerlink" title="E-R模型的细节"></a>E-R模型的细节</h2><h3 id="关系中实体参与的基数"><a href="#关系中实体参与的基数" class="headerlink" title="关系中实体参与的基数"></a>关系中实体参与的基数</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/22/QzbqXD.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<ul>
<li><p>如果实体E中所有的点最多只有一条出边，那么：</p>
<p>$max-card(E, R) = 1$</p>
</li>
<li><p>如果实体E中的点有超过一条出边，那么：</p>
<p>$max-card(E,R) = N$</p>
</li>
<li><p>如果实体E中所有的点至少有一条出边，那么：</p>
<p>$min-card(E,R)=1$</p>
</li>
<li><p>如果实体E中有的点没有出边，那么：</p>
<p>$min-card(E,R)=0$</p>
</li>
<li><p>如果$min-card(E,R)=x$，$max-card(E,R)=y$，那么最小最大有序对是：$card(E,R)=(x,y)$</p>
</li>
</ul>
<p>例子：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/22/QzqZAs.png" alt="QzqZAs.png" title>
                </div>
                <div class="image-caption">QzqZAs.png</div>
            </figure>

<p>即$card(E,R)=(0,N)$，$card(F,R)=(1,1)$</p>
<ul>
<li><p>如果$max-card(X,R)=1$，那么在关系R中X是<strong>单值参与（single-valued participation）</strong></p>
</li>
<li><p>如果$max-card(X,R)=N$，那么在关系R中X是<strong>多值参与（multi-valued participation）</strong></p>
</li>
<li><p>如果$min-card(X,R)=1$，那么在关系R中X是<strong>强制参与（mandatory participation）</strong></p>
</li>
<li><p>如果$min-card(X,R)=0$，那么在关系R中X是<strong>可选参与（optional participation）</strong></p>
</li>
</ul>
<h3 id="一对一、多对一、多对多关系"><a href="#一对一、多对一、多对多关系" class="headerlink" title="一对一、多对一、多对多关系"></a>一对一、多对一、多对多关系</h3><p>只是针对max-card概念而言的</p>
<ul>
<li>一对一：两个实体都是单值参与</li>
<li>多对一：一个实体是单值参与，另一个实体是多值参与</li>
<li>多对多：两个实体都是多值参与</li>
</ul>
<h3 id="将二元联系转化成关系"><a href="#将二元联系转化成关系" class="headerlink" title="将二元联系转化成关系"></a>将二元联系转化成关系</h3><h5 id="转换规则3-N-N联系"><a href="#转换规则3-N-N联系" class="headerlink" title="转换规则3 N-N联系"></a>转换规则3 N-N联系</h5><p>当两个实体E和F参与一个多对多的二元联系R时，在相关的关系数据库设计中，联系映射成一个表T</p>
<ul>
<li>表T包括从E和F转化而来的两个表的主键的所有属性，这些列构成了表T的主键</li>
<li>表T还包含了<strong>连结到联系的所有属性</strong>的列</li>
</ul>
<p>联系实例用表的行表示，相关联的实体实例可以通过这些行的主键值唯一地标识出来</p>
<img src="https://i.loli.net/2019/12/23/FoItMcQ5L2XJSN4.png" style="zoom:80%;">

<h5 id="转换规则4-N-1联系"><a href="#转换规则4-N-1联系" class="headerlink" title="转换规则4 N-1联系"></a>转换规则4 N-1联系</h5><p>当两个实体E和F参与一个多对一的二元联系R时，这个联系在关系数据库设计中不能映射为自身的一张表；相反，如果我们假设实体F具有$max-card(F,R)=1$，并表示联系关系中的“多”方，那么从实体F转化成的关系表T中应当包括从实体E转换出来的关系表的主键属性列，这被称为<strong>T的外键</strong>。由于$max-card(F,R)=1$，T的每一行都通过一个外键值联系到实体E的一个实例，如果F在R中是强制参与的($min-card(F,R)=1$)，那么它必须恰恰与E的一个实例相联系，这意味着T的上述外键不能取空值；如果F在R中是可选参与的($min-card(F,R)=0$)，那么T中不与E的实例相联系的行在外键的所有列可以取空值</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/1STFUhnHRYAOzM9.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>其中Course_sections是“多”方，因此在它转换出来的关系表中包含Instructors的主键insid作为外键</p>
<h5 id="转换规则5-1-1联系，可选参与"><a href="#转换规则5-1-1联系，可选参与" class="headerlink" title="转换规则5 1-1联系，可选参与"></a>转换规则5 1-1联系，可选参与</h5><p>给定两个实体E和F，他们参与一对一二元联系R，二者的参与都是可选的，首先按照转换规则1建立表S表示实体E、表T表示实体F，然后向表T中添加一组列（作为外键），这些列在表S构成主键；对于R的任何联系实例，都有唯一一个E的实例联系到唯一一个F的实例——在S和T的对应行中，外键列填写的值引用另一张表相应行，这一联系是R的实例确定的</p>
<h5 id="转换规则6-1-1联系，强制参与"><a href="#转换规则6-1-1联系，强制参与" class="headerlink" title="转换规则6 1-1联系，强制参与"></a>转换规则6 1-1联系，强制参与</h5><p>对于一个两方都是强制参与的一对一联系，最好将两个实体对应的两个表<strong>合并成一个表</strong>，这一可以<strong>避免使用外键</strong></p>
<p>对于N元联系（N&gt;2）的转换规则，通常将这些N元联系转换成自己对应的表；如果除去一个实体外其余参与联系的所有实体都带有$max-card=1$（类似于星状结构），那么可以在那个具有较大基数的参与实体对应的表中，加入N-1个外键来表示这个联系</p>
<h2 id="其他E-R概念"><a href="#其他E-R概念" class="headerlink" title="其他E-R概念"></a>其他E-R概念</h2><h3 id="属性的基数"><a href="#属性的基数" class="headerlink" title="属性的基数"></a>属性的基数</h3><p>$min-card/max-card$可以用来描述实体属性的基数</p>
<ul>
<li>$(0,?)$表示属性不需要声明为<code>not null</code>（可选的，optional）</li>
<li>$(1,?)$表示属性声明为<code>not null</code>（强制的，mandatory）</li>
<li>$(?,1)$表示单值属性</li>
<li>$(?,N)$表示多值属性</li>
</ul>
<img src="https://i.loli.net/2019/12/23/gNEvdq7a2eCfsno.png" style="zoom:80%;">

<img src="https://i.loli.net/2019/12/23/PhU2OyNQHD1qs3I.png" style="zoom:80%;">

<h3 id="弱实体"><a href="#弱实体" class="headerlink" title="弱实体"></a>弱实体</h3><p>定义：如果实体的所有实例都<strong>通过一个联系R</strong>依赖于另一个实体的实例而存在，那么这个实体就是<strong>弱实体</strong>，而另一个实体称为<strong>强实体</strong></p>
<blockquote>
<p><strong>Strong Entity:</strong><br>Strong entity is not dependent of any other entity in schema. Strong entity always has primary key. <a href="https://practice.geeksforgeeks.org/problems/what-is-the-difference-between-strong-and-weak-entity" target="_blank" rel="noopener">Strong entity</a> is represented by single rectangle. Two strong entity’s relationship is represented by single diamond.<br>Various strong entities together makes the strong entity set.</p>
<p><strong><a href="https://practice.geeksforgeeks.org/problems/explain-weak-entity-types" target="_blank" rel="noopener">Weak Entity</a>:</strong><br>Weak entity is depend on strong entity to ensure the existance of weak entity. Like strong entity weak entity does not have any primary key, It has partial discriminator key. Weak entity is represented by double rectangle.<br>The relation between one strong and one weak entity is represented by double diamond.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://media.geeksforgeeks.org/wp-content/uploads/20190520181337/Untitled-Diagram-231.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p><strong>Difference between Strong and Weak Entity:</strong></p>
<table>
<thead>
<tr>
<th align="center">S.NO</th>
<th align="center">STRONG ENTITY</th>
<th align="center">WEAK ENTITY</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1.</td>
<td align="center">Strong entity always has primary key.</td>
<td align="center">While weak entity has partial discriminator key.</td>
</tr>
<tr>
<td align="center">2.</td>
<td align="center">Strong entity is not dependent of any other entity.</td>
<td align="center">Weak entity is depend on strong entity.</td>
</tr>
<tr>
<td align="center">3.</td>
<td align="center">Strong entity is represented by single rectangle.</td>
<td align="center">Weak entity is represented by double rectangle.</td>
</tr>
<tr>
<td align="center">4.</td>
<td align="center">Two strong entity’s relationship is represented by single diamond.</td>
<td align="center">While the relation between one strong and one weak entity is represented by double diamond.</td>
</tr>
<tr>
<td align="center">5.</td>
<td align="center">Strong entity have either total participation or not.</td>
<td align="center">While weak entity always has total participation.</td>
</tr>
</tbody></table>
<p>—— reference: <a href="https://www.geeksforgeeks.org/difference-between-strong-and-weak-entity/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/difference-between-strong-and-weak-entity/</a></p>
</blockquote>
<img src="https://i.loli.net/2019/12/23/6JjnoVqdNSGRzDs.png" style="zoom:80%;">

<h3 id="泛化层次"><a href="#泛化层次" class="headerlink" title="泛化层次"></a>泛化层次</h3><p>泛化层次是对应于对象-关系继承特性的E-R概念，其思想是：多个有公共属性的实体可以泛化为一个更高层次的超类型实体（supertype entity），或者一个一般化实体可以分解成低层次的子类型实体（subtype entity）；目的是让属性隶属于适当的层次，以免使用一个每个实例需要使用大量空值的公共实体的属性</p>
<p>泛化层次的E-R图用箭头（不命名）从子类型实体指向超类型实体，这个箭头联系经常称为<strong>ISA联系</strong></p>
<img src="https://i.loli.net/2019/12/23/hHYJc4X28KZdg1a.png" style="zoom: 67%;">

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/4Zb6xj182LUHNDn.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>



<h2 id="案例学习"><a href="#案例学习" class="headerlink" title="案例学习"></a>案例学习</h2><p>解题思路：</p>
<ol>
<li>有哪些实体(Entity)？</li>
<li>有哪些联系(Relationship)？</li>
<li>联系上的函数对应关系（参与方式）？</li>
<li>有哪些属性？属性与实体/联系的依附关系？</li>
</ol>
<h3 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h3><p>设有一个图书借阅管理数据库， 已知： 图书的属性有书号（具有唯一性） 、 书名； 读者的属性有借书证号（具有唯一性， 每个读者只能有一个借书证号） 、 姓名、 身份证号、 住址、 电话； 出版社的属性有出版社名称（具有唯一性） 、 地址、 联系电话。<br>其中： 每本图书只能有一个出版社出版发行；每个读者可以同时借阅多本图书， 也可以在不同时候借阅同一本图书； 系统需要记录每本图书被借阅的借阅日期和归还日期。<br>请用E-R模型表示该数据库系统的概念模型，并将其转换成等价的关系模式。</p>
<h4 id="概念模型"><a href="#概念模型" class="headerlink" title="概念模型"></a>概念模型</h4><img src="https://i.loli.net/2019/12/23/SfMCXBpuDUrdhKN.png" style="zoom:80%;">

<p>注意点：</p>
<ul>
<li>借阅关系中的归还日期属性基数是：$(0,1)$，是因为一本书被借阅但是尚未归还时，归还日期是空值</li>
<li>读者实体和电话的关系：电话是多值属性$(0,N)$，或许应该使用双线连接？</li>
</ul>
<h4 id="关系模式"><a href="#关系模式" class="headerlink" title="关系模式"></a>关系模式</h4><ul>
<li>图书（<u>书号</u>，书名，<strong>出版社名称</strong>）</li>
<li>出版社（<u>出版社名称</u>，联系电话，地址）</li>
<li>读者（<u>借书证号</u>，姓名，身份证号，地址）</li>
<li>读者电话（<u>借书证号，电话</u>）</li>
<li>借阅 ( <u>借书证号, 书号</u>, 借阅日期, 归还日期 )</li>
</ul>
<p>注意点：</p>
<ul>
<li>因为<strong>“出版”关系是多对一联系</strong>，因此应该在“多”方（即图书实体）添加属性表示转换成的关系表中添加“一”方（即出版社实体）的外键“出版社名称”</li>
<li>由于<strong>电话是多值属性</strong>，因此应该单独映射成一张表，表中包含多值属性自身（即电话）和它连接的实体（即读者实体）的主键</li>
<li><strong>关系“借阅”是多对多联系</strong>，因此应该将其转换成一张表，并且表中包含关系两边的实体的主键（构成借阅关系表的主键），并且转换后的关系表还包含附在关系上的属性（借阅日期和归还日期）</li>
</ul>
<h3 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h3><p>假设需要设计一个用于NBA篮球比赛的数据库系统，需要记录的信息有：</p>
<ul>
<li>每个球员的球衣号码、姓名、身高、体重和位置</li>
<li>每个球队的名称和主场使用的体育馆的名称</li>
<li>每场比赛的比赛日期和比分</li>
</ul>
<p>其中：</p>
<ul>
<li>每个球员只能效力于一个球队</li>
<li>比赛采用主客场多循环方式</li>
</ul>
<p>请用E-R模型表示该数据库系统的概念模型，并将其转换成等价的关系模式</p>
<h4 id="概念模型-1"><a href="#概念模型-1" class="headerlink" title="概念模型"></a>概念模型</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/XpsgFKuWlHoB4De.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="关系模式-1"><a href="#关系模式-1" class="headerlink" title="关系模式"></a>关系模式</h4><ul>
<li><p>球员（<u>姓名</u>, 球衣号码, 身高, 体重, 位置，<strong>球队名称</strong>）</p>
<p>“签约”联系向关系的转换（Rule 4）</p>
</li>
<li><p>球队（<u>名称</u>, 体育馆名称）</p>
</li>
<li><p>比赛（<u>主队名称, 客队名称</u>, 日期, 比分）</p>
<p>“比赛”联系向关系的转换（Rule 3）</p>
</li>
</ul>
<h3 id="案例三"><a href="#案例三" class="headerlink" title="案例三"></a>案例三</h3><p>假设需要设计一个用于网络论坛聊天信息管理的数据库系统，需要记录的信息有：</p>
<ul>
<li>注册用户的用户名，email，电话，联系地址</li>
<li>帖子的帖子ID，标题，内容</li>
<li>每份帖子的发帖用户，帖子之间的回复关系</li>
</ul>
<p>请用E-R模型表示该数据库系统的概念模型，并将其转换成等价的关系模式</p>
<h4 id="概念模型-2"><a href="#概念模型-2" class="headerlink" title="概念模型"></a>概念模型</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/IXQ3grM1nbEfh8y.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="关系模式-2"><a href="#关系模式-2" class="headerlink" title="关系模式"></a>关系模式</h4><p>方法一：</p>
<ul>
<li>用户(<u>用户名</u>, 电话, 地址, email)</li>
<li>帖子(<u>帖子ID</u>, 标题, 内容 , 用户名, 原帖ID )</li>
</ul>
<p>方法二：</p>
<ul>
<li>用户 ( <strong>用户名</strong>, 电话, 地址, email)</li>
<li>帖子 ( <strong>帖子ID</strong>, 标题, 内容, 用户名 )</li>
<li>回复 ( 原帖ID, <strong>回帖ID</strong> )</li>
</ul>
<p>注意点：</p>
<ul>
<li>这里比较特殊的是“回复”关系，它是一个递归联系（即实体到自身的联系）并且是多对一联系，有两种处理方案：<ul>
<li>将“回复”关系单独转换成一张表，那么这张表的主键就是“多”方（即回帖）的主键，即回帖ID</li>
<li>由于这个关系本质上还是多对一联系，因此还是可以直接在“多”方（即帖子实体）中添加“一”方（也还是帖子实体）的外关键字这一属性（即原贴ID），这个就对应了方法一那种解法</li>
</ul>
</li>
</ul>
<h3 id="案例四"><a href="#案例四" class="headerlink" title="案例四"></a>案例四</h3><p>有一个邮件管理数据库，其信息如下：</p>
<ul>
<li>联系人：用户名，email（关键字），电话，联系地址</li>
<li>邮件：邮件ID，邮件标题，邮件内容，收信人集合，抄送人集合</li>
<li>邮件之间的回复关系</li>
</ul>
<p>请用E-R模型表示该数据库系统的概念模型，并将其转换成等价的关系模式</p>
<h4 id="概念模型-3"><a href="#概念模型-3" class="headerlink" title="概念模型"></a>概念模型</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/GjELySZ4bBm16Rq.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="关系模式-3"><a href="#关系模式-3" class="headerlink" title="关系模式"></a>关系模式</h4><ul>
<li>联系人(<u>email</u>, 用户名, 电话, 地址)</li>
<li>邮件(<u>邮件ID</u>, 邮件标题, 邮件内容, 发件人email, 被回复邮件的ID )</li>
<li>接收 ( <u>邮件ID,  收信人email</u> )</li>
<li>抄送 ( <u>邮件ID,  抄送人email</u> )</li>
</ul>
<h2 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h2><h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><h4 id="第一范式（1NF）"><a href="#第一范式（1NF）" class="headerlink" title="第一范式（1NF）"></a>第一范式（1NF）</h4><p>符合第一范式的表就是没有多值字段的表</p>
<h4 id="第三范式（3NF）"><a href="#第三范式（3NF）" class="headerlink" title="第三范式（3NF）"></a>第三范式（3NF）</h4><p>任何不符合第三范式的表都能够被分解为几个不同的表，并且具有以下性质：</p>
<ul>
<li>每一个分解出的表都是一个有效的第三范式表</li>
<li>所有分解出的表的联接恰恰包含原始表的信息</li>
</ul>
<p>从原始全局表分解出的3NF表集合被称为数据库的一个<strong>3NF无损分解</strong></p>
<h3 id="异常操作"><a href="#异常操作" class="headerlink" title="异常操作"></a>异常操作</h3><h4 id="更新异常（Update-Anomaly）"><a href="#更新异常（Update-Anomaly）" class="headerlink" title="更新异常（Update Anomaly）"></a>更新异常（Update Anomaly）</h4><p>如果更改表所对应的某个实体实例或关系实例的单个属性时，需要将多行更新，那么就说这个表存在更新异常</p>
<h4 id="删除异常（Delete-Anomaly）"><a href="#删除异常（Delete-Anomaly）" class="headerlink" title="删除异常（Delete Anomaly）"></a>删除异常（Delete Anomaly）</h4><p>如果删除表的某一行来反映某个实体实例或关系实例消失时，会导致另一个不同实体实例或关系实例的信息，而这是我们不希望丢失的，那么就说这个表存在删除异常</p>
<h4 id="插入异常（Insert-Anomaly）"><a href="#插入异常（Insert-Anomaly）" class="headerlink" title="插入异常（Insert Anomaly）"></a>插入异常（Insert Anomaly）</h4><p>我们无法在缺少另一个实体实例或关系实例信息的情况下，表示某个实体或实例的信息，那么就存在插入异常</p>
<h2 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h2><p>函数依赖（Functional Dependency，FD）：给定一个包含至少两个属性A和B的表T，我们说A→B（A函数决定B或者B函数依赖于A），当且仅当设计者希望对于表T的任何可能的内容（行集合），T中的两行不能在A上取相同值而在B上面取不同值</p>
<ul>
<li>即，给定T的两行$r_1$和$r_2$，如果$r_1(A)=r_2(A)$，那么$r_1(B)=r_2(B)$</li>
</ul>
<p><img src="https://i.loli.net/2019/12/23/MCuN3z87RBmYIrE.png" style="zoom: 50%;"><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/3yD1P6FMk5A2lcm.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure></p>
<img src="https://i.loli.net/2019/12/23/3yD1P6FMk5A2lcm.png" style="zoom: 50%;">

<p>可以把函数依赖的定义扩展到完整的一般形式的以处理属性集的情况：</p>
<p>给定表T和两个属性集，分别为$X=A_1A_2…A_k$和$Y=B_1B_2…B_m$，X的一些属性可以和Y的一些属性重叠，我们说X→Y（X函数决定Y或者Y函数依赖于X），当且仅当T中两行不能在X的所有属性上相同，而同时在Y的任一属性取不同值，即：给定T的两行$r_1$和$r_2$，如果$r_1(A_i)=r_2(A_i)$对每一个X中的$A_i$成立，那么$r_1(B_j)=r_2(B_j)$对于Y中的每一个$B_j$成立</p>
<img src="https://i.loli.net/2019/12/23/p1V5dKHogAql93B.png" style="zoom: 50%;">

<h3 id="函数依赖的逻辑蕴涵"><a href="#函数依赖的逻辑蕴涵" class="headerlink" title="函数依赖的逻辑蕴涵"></a>函数依赖的逻辑蕴涵</h3><h4 id="包含规则"><a href="#包含规则" class="headerlink" title="包含规则"></a>包含规则</h4><p>给定表T，其标题是$Head(T)$，如果X和Y是$Head(T)$中属性的集合，并且$Y\subset X$，那么$X→Y$</p>
<h4 id="平凡依赖"><a href="#平凡依赖" class="headerlink" title="平凡依赖"></a>平凡依赖</h4><p>表T中的一个平凡依赖是一个形如$X→Y$的函数依赖，其中$X\cap Y\subseteq Head(T)$，且对于表T的任何可能的内容都成立</p>
<p>给定表T的一个平凡依赖$X→Y$，必然有$Y\sub X$</p>
<h3 id="阿姆斯特朗公理"><a href="#阿姆斯特朗公理" class="headerlink" title="阿姆斯特朗公理"></a>阿姆斯特朗公理</h3><p>假设给定一个表T，以及$Head(T)$的子集X、Y、Z，那么我们有下面的蕴含规则：</p>
<ul>
<li><p>包含规则：如果$Y\sub X$，那么$X→Y$</p>
</li>
<li><p>传递规则：如果$X\sub Y$且$Y\sub Z$，那么$X\sub Z$</p>
</li>
<li><p>增广规则：如果$X→Y$，那么$XZ→YZ$</p>
</li>
</ul>
<p>其中两个顺序排列的顺序的集合表示一个并运算，即$XY=X\cup Y$</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/23/VSQbEHqY2cgeCFz.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>阿姆斯特朗公理的一些蕴含：</p>
<ul>
<li><p>合并规则：如果$X→Y$且$X→Z$，那么$X→YZ$</p>
</li>
<li><p>分解规则：如果$X→YZ$，那么$X→Y$且$X→Z$</p>
</li>
<li><p>伪传递规则：如果$X→Y$且$WY→Z$，$XW→Z$</p>
</li>
<li><p>集合累积规则：如果$X→YZ$且$Z→W$，那么$X→YZW$</p>
</li>
</ul>
<p>阿姆斯特朗公理是完全的</p>
<h3 id="函数依赖集的闭包"><a href="#函数依赖集的闭包" class="headerlink" title="函数依赖集的闭包"></a>函数依赖集的闭包</h3><p>给定一个函数依赖集F，它作用在表T的属性上，我们定义F的闭包为可以从F推导出的所有函数依赖的集合（包括平凡依赖），记为$F^+$</p>
<p>例子如下：</p>
<img src="https://i.loli.net/2019/12/23/O7LkaDWtBAMhYmo.png" style="zoom:80%;">

<h3 id="函数依赖集的覆盖"><a href="#函数依赖集的覆盖" class="headerlink" title="函数依赖集的覆盖"></a>函数依赖集的覆盖</h3><p>表T上的两个函数依赖集合F和G，如果函数依赖集G可以从F用蕴含规则推导出来，或者换句话说，如果$G\sub F^+$，那么我们说F覆盖G。如果F覆盖G且G覆盖F，那么这两个函数依赖集称为等价的，写作$F\equiv G$</p>
<h3 id="属性集的闭包"><a href="#属性集的闭包" class="headerlink" title="属性集的闭包"></a>属性集的闭包</h3><p>给定表T的函数依赖集F和T中包含的属性集X，我们定义X的闭包$X^+$，作为由X函数决定的最大属性集合Y，则最大集合Y满足$X→Y$存在于$F^+$中；注意，根据包含规则，集合Y一定包含了X的所有属性，但可以不包含其他任何属性</p>
<p>求集合闭包的相关算法（一个技巧是，函数依赖集中的函数依赖使用一次之后，在后续的循环中就不再需要使用了，因为不会再产生新的作用）：</p>
<img src="https://i.loli.net/2019/12/23/ZBWcUq7ryfNC1da.png" style="zoom:67%;">

<p>可以通过集合闭包来<strong>确定一个给定的函数依赖是否可以从函数依赖集F推导出来</strong>，例如：如果我们需要知道函数依赖$X→A$是否可以有函数依赖集F推导出来，我们只需简单地在F下使用集合闭包算法<strong>计算出$X^+$，然后看它是否包含A</strong>，如果包含，那么$X→A$在$F^+$中，即它可以由F推导出来</p>
<p>表的键恰恰是这个表中可以<strong>函数决定所有属性</strong>的最小属性集合，<strong>为判断X是否是一个键</strong>，我们只需要在该表的属性的函数依赖集F下计算$X^+$，看它是否包括了表中全部属性，然后确认没有X的某个子集也满足这一点</p>
<h3 id="最小覆盖"><a href="#最小覆盖" class="headerlink" title="最小覆盖"></a>最小覆盖</h3><p>能够覆盖给定的函数依赖的最小函数依赖集合</p>
<ul>
<li>没有冗余的函数依赖</li>
<li>每一个函数依赖的左边都没有多余的属性</li>
</ul>
<p>算法步骤：</p>
<ol>
<li><p>从函数依赖集F，我们<strong>使用分解规则</strong>创建函数依赖的一个等价集H，它的函数依赖的<strong>右边只有单个属性</strong></p>
<p><img src="https://i.loli.net/2019/12/23/MRpl72JcuG9Ntme.png" alt></p>
</li>
<li><p>从函数依赖集H，顺次去掉在H中非关键的单个函数依赖；一个函数依赖$X→Y$在一个函数依赖集H中是非关键的，是指如果$X→Y$从H中去掉，得到结果J，仍然有$H^+=J^+$，或者$H\equiv J$；就是说，从H中去掉这个函数依赖对于$H^+$没有任何影响</p>
<p><img src="https://i.loli.net/2019/12/23/DwKz5fdVSP2pvxG.png" alt></p>
<p>画蓝线的部分是求J的函数依赖集的闭包$X^+$，然后看$X^+$是否包含A，如果是的话，说明去掉该函数依赖之后，得到的函数依赖集依然是和之前的函数依赖集等价</p>
</li>
<li><p>从函数依赖集H，顺次用左边具有更少属性的函数依赖替换原来的函数依赖，只要不会导致$H^+$改变</p>
<p>要注意，<strong>如果在步骤3的计算过程中，函数依赖集发生了变化，那么需要返回到步骤2，消除冗余的函数依赖</strong></p>
<p><img src="https://s2.ax1x.com/2019/12/23/l91dtU.png" alt="l91dtU.png"></p>
<p><img src="https://s2.ax1x.com/2019/12/23/l91whF.png" alt="l91whF.png"></p>
</li>
<li><p>从剩下的函数依赖集中<strong>收集所有左边相同的函数依赖</strong>，使用联合规则创建一个等价函数依赖集M，它的所有函数依赖的<strong>左边是唯一的</strong></p>
<p><img src="https://s2.ax1x.com/2019/12/23/l91HBt.png" alt="l91HBt.png"></p>
</li>
</ol>
<p>注意，当你<strong>在函数依赖已经改变的地方开始新的一个步骤时，重写函数依赖集很重要</strong>，保证后续的所有操作都是基于最新的函数依赖集上进行的</p>
<h2 id="无损分解"><a href="#无损分解" class="headerlink" title="无损分解"></a>无损分解</h2><p>规范化过程：将一个表分解成两个或者更多较小的表；这种方法中，我们可以把分解出的表连接起来重新获得到原始表的详细信息</p>
<p>projecting onto two or more subsets of columns that cover all columns and <strong>have some columns in common</strong></p>
<p>but it doesn’t always work when join back that keep all information of original table;  Always get ALL rows back, but might get MORE</p>
<h3 id="无损分解-1"><a href="#无损分解-1" class="headerlink" title="无损分解"></a>无损分解</h3><p>对于任何表T以及它的一个函数依赖集F，T的一个分解是一个表的集合${T_1,T_2,…,T_k}$，该集合具有两个性质：</p>
<ul>
<li>对于这个集合中的每一个表$T_i$，$Head(T_i)$是$Head(T)$一个子集</li>
<li>$Head(T)=Head(T_1)\cup Head(T_2)\cup …Head(T_k)$</li>
</ul>
<p>给定表T的特定内容，即T的行被投影到每个$T_i$的列上作为分解的结果；如果对表T的任何内容，F中的函数依赖都保证如下关系成立则称表T的一个分解相对于函数依赖集F是一个无损分解：</p>
<p>$T=T_1\infin T_2\infin…\infin T_k$</p>
<p>有时候表T被分解后，不能通过将分解出的表连接起来恢复原始表的所有信息，往往是因为<strong>我们得到了原先没有的行</strong></p>
<p>有损分解：$T\sub T_1\infin T_2\infin …\infin T_k$</p>
<img src="https://i.loli.net/2019/12/24/4rWG8jMvEP751Hw.png" style="zoom:67%;">

<h3 id="数据库模式（Scheme）"><a href="#数据库模式（Scheme）" class="headerlink" title="数据库模式（Scheme）"></a>数据库模式（Scheme）</h3><p>一个数据库模式是数据库中<strong>所有表的标题的集合</strong>，以及设计者希望在那些表的连接上<strong>成立的所有函数依赖</strong>的集合</p>
<p>定理：给定表T和属性集$X\sub Head（T）$，下面的两个陈述是等价的：</p>
<ul>
<li>X是T的一个超键</li>
<li>$X→Head(T)$，即属性集X函数决定了T中的所有属性</li>
</ul>
<p>等价表述为：$X^+=Head(T)$</p>
<p>定理：给定表T和它的有效函数依赖集F，一个把T分为两个表${T_1,T_2}$的分解是T的一个无损分解，当且仅当$Head(T_1)$和$Head(T_2)$都是$Head(T)$的真子集，$Head(T)=Head(T_1)\cup Head(T_2)$，同时如如下函数依赖之一可以通过F推导出来：</p>
<ul>
<li>$Head(T_1)\cap Head(T_2)→Head(T_1)$</li>
<li>$Head(T_1)\cap Head(T_2)→Head(T_2)$$</li>
</ul>
<img src="https://i.loli.net/2019/12/24/bzK7pmkhJM2er9G.png" style="zoom:67%;">

<h3 id="多表的无损连接分解"><a href="#多表的无损连接分解" class="headerlink" title="多表的无损连接分解"></a>多表的无损连接分解</h3><p>$T =&gt; { T_1, T_2, …,T_k }$</p>
<p>我们可以递归使用两个表的结果来证明分解是否是无损分解</p>
<p>$(((T_1;join;T_2);join;T_3) …;join;T_k)$</p>
<img src="https://i.loli.net/2019/12/24/cAa6KkWrEVzsuMC.png" style="zoom:67%;">



<h2 id="范式-1"><a href="#范式-1" class="headerlink" title="范式"></a>范式</h2><p>模式中出现种种异常的根本原因：F中的一个函数依赖的左边的某个属性（也有可能是属性集合）在它出现的表中可能多次重复出现（也可能出现零次），解决方法是<strong>创建一个单独的表，把这个函数依赖左边的属性以及所有处于右边的所有属性放入其中</strong>，同时<strong>把右边的属性从它们先前出现的表中除去</strong>，这样<strong>函数依赖左边的属性在老的和新的表中都出现，而且决定所有新表中的其他属性，所以这个分解是无损的</strong>（当函数依赖集F中不再有其他函数依赖，我们就可以保证没有其他异常会产生，不需要进一步分解）</p>
<p>不需要进一步分解的标准：所有只涉及这个模式中单个表的属性的函数依赖只源自该表的键</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/Z8NHvuWxmABJKGD.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="依赖保持（FD-Preserved）"><a href="#依赖保持（FD-Preserved）" class="headerlink" title="依赖保持（FD Preserved）"></a>依赖保持（FD Preserved）</h3><p>设关系模式R上的函数依赖集为F，将关系模式R分解为${T_1, T_2, ……,T_k }$这k个子关系模式，从函数依赖集F中可以推导出的在子关系模式$T_i$上所存在的函数依赖集为$F_i (i=1,2,…,k)$；如果函数依赖集F和$（F_1\cup F_2\cup…\cup F_k）$是相互等价的，即$F^+ = (F_1\cup F_2\cup…\cup F_k)^+$，则我们称该分解是具有依赖保持性的</p>
<p>即是说，原表的函数依赖被分解后的多个表保持，因此无论何时模式中的一个表被更新，都可以验证任何被这个更新影响的函数依赖仍然有效（不会被破坏）</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/vjfDouZ6K8M2PiO.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="超键"><a href="#超键" class="headerlink" title="超键"></a>超键</h3><p>给定表T和函数依赖集F、属性集X，<strong>X是一个超键当且仅当X函数决定T中的所有属性</strong><br>$$<br> X→Head(T);or;X^+_F = Head(T)<br>$$<br>候选键查找算法（候选键可能有多个）：</p>
<img src="https://i.loli.net/2019/12/24/sHvmf6TVSwxrWEU.png" style="zoom:67%;">

<h3 id="主属性（Primary-Attribute）"><a href="#主属性（Primary-Attribute）" class="headerlink" title="主属性（Primary Attribute）"></a>主属性（Primary Attribute）</h3><p>表T的一个主属性是表T的键（不需要是一个主键）的任何一个属性；除此之外都是非主属性（Non-primary Attribute）</p>
<p>或者说在表T中，一个属性A称为是主属性当且仅当<strong>属性A存在这个表的某个键K中</strong></p>
<img src="https://i.loli.net/2019/12/24/oSLM3q784pNWQEF.png" style="zoom:80%;">

<h3 id="BCNF（Boyce-Codd-Normal-Form，修正的第三范式）"><a href="#BCNF（Boyce-Codd-Normal-Form，修正的第三范式）" class="headerlink" title="BCNF（Boyce-Codd Normal Form，修正的第三范式）"></a>BCNF（Boyce-Codd Normal Form，修正的第三范式）</h3><p>一个数据库模式中的表T及函数依赖集F被称为符合BCNF的当且仅当：</p>
<p>任何F可推导出的函数依赖$X→A$都在T中，这里<strong>A是不在X中的单一属性，X必须是T的一个超键</strong>；</p>
<p>当一个数据库模式包含的所有表都符合BCNF时，这个数据库被称为符合BCNF</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/irFUARCZoLpQWuI.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>我们希望总可以从一个通用的表开始进行无损分解到满足BCNF来保证函数依赖的保持</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/15zMjJX2QLaCEYr.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="3NF（Third-Normal-Form，第三范式）"><a href="#3NF（Third-Normal-Form，第三范式）" class="headerlink" title="3NF（Third Normal Form，第三范式）"></a>3NF（Third Normal Form，第三范式）</h3><p>对任何由F推导出来并存在于表T中的函数依赖$X→A$（这里A是单个属性且不在X中），下面两个属性之一必须成立：</p>
<ul>
<li>（A是T的一个非主属性时）X是T的一个超键</li>
<li>A是T的一个主属性</li>
</ul>
<p>当一个数据库模式包含的所有表符合3NF时，这个数据库模式称为符合3NF</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/xf2ASa6YHLpG8Cz.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>当一个表不能成为3NF时，它一定含有一个有效的非平凡函数依赖$X→A$，这里的<strong>A是非主属性且X不是T的一个超键</strong>；如果一个表是符合BCNF的，那么它一定符合3NF</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/9JmpYQZsAluo3HO.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>获得良好的3NF分解的算法（它产生一个符合第三范式且保持F中的函数依赖的如孙连接分解，算法的输出是数据库模式中表的标题（属性集合）的一个集合）：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/WqBF6vNzfUtDPlp.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>可以看到算法的包括三个过程：</p>
<ul>
<li>计算最小覆盖，然后后面的算法都是基于最小覆盖进行的</li>
<li>根据函数依赖来计算生成的新表</li>
<li>根据候选键计算生成的新表</li>
</ul>
<h3 id="2NF（Second-Normal-Form，第二范式）"><a href="#2NF（Second-Normal-Form，第二范式）" class="headerlink" title="2NF（Second Normal Form，第二范式）"></a>2NF（Second Normal Form，第二范式）</h3><p>对于存在于T中由F推导的任何函数依赖$X→A$（A是一个不在X中的单一属性而且是非主属性），<strong>X不是T的任何键K的真子集</strong>；</p>
<p>当一个数据库模式包含的所有表都符合2NF时，这个数据库模式称为符合2NF</p>
<p>可见，一个2NF的表，不允许有被键K的真子集函数决定的属性</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/24/w5ZcB7hHqWkroF1.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
























        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-12-25T15:49:14.797Z" itemprop="dateUpdated">2019-12-25 23:49:14</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2019/12/22/数据库-数据库设计/" target="_blank" rel="external">http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/</a>
        
    </div>
    
    <footer>
        <a href="http://QQ876684433.github.io">
            <img src="/img/avatar.jpg" alt="steve_chph">
            steve_chph
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库设计/">数据库设计</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&title=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&title=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/12/23/软件系统设计复习 - Part2/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">软件系统设计复习 - Part2</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/12/22/数据库-完整性、视图、安全性和目录/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">数据库-完整性、视图、安全性和目录</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢你~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>steve_chph &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&title=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&title=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库-数据库设计》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/22/数据库-数据库设计/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACrUlEQVR42u3awW7jMAwE0P7/T6fAnrYomsyQUpvD82nhZm09HSxiyI+P+Hr8u/Jf/v/773eSt3z/fb6G+sLDw8MbLf2nK3l0+4Tkyc83KHkjHh4e3m1e/pnOMe1mJaT8CXh4eHjvwBu+YF0Wr96Oh4eH96e8WWDxPIx4lBceHh7e+/DaEnkWTORBbVJSH85a8PDw8GJe2wB7h39f7O/h4eHhLbrq7YExO0L20fCP/wsPDw/vAq8dipqNSSWF76lSO8qA8fDw8Na8ZHFtOz8JETbLrQcL8PDw8A7x2jGpvJXVHir5neLIwcPDw7vAm5XFpxaabF9SiL/YVjw8PLxrvHYgICl/N1HsbLNeTEbg4eHhHeW1wcGmTTU7Hp4z8PDw8P6Kt2mSFZlxXC6363mRuODh4eEd4m3Gp9qwII8zNvfx8PDwbvPyz2s7MjV7wizOWM1E4OHh4Y14+dDVrJE/iyQOHFF4eHh413j3xqf2x8CBGAIPDw/vAi8pi/PPdxsobIa0XrwLDw8P7ygvH59KWvs3nta+8ct9PDw8vAu8NlB4/oGetf/z328ODDw8PLyzvE1Quw9hZwV3sdF4eHh4R3ltOZssuqW2IUg+gIWHh4d3j7efUNqMHeTLHQYQeHh4eEd57cd63+DPP/RXZsrw8PDwDvGKrLfMOdq21mxEIDpy8PDw8I7yNi/Lj418OzZ3onMPDw8P7xBvFqS2Me5mrKqOcfHw8PAu8B7ltanZzwYc0cGAh4eHd4GXX+3nPn/mfrBgmL7g4eHhLXh5gbsB74cShsU3Hh4e3jVeG1K0B0D+1/rUSiIJPDw8vDfg5Z36NiZoD4Ni3AoPDw/v13ltK6sdGthvEx4eHt5v8jaN/Pz+prWWjy/g4eHh3eZtGmD3ots8zF119vDw8PA63ic/g0rf1dFDEwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'chph个人博客';
            clearTimeout(titleTime);
        } else {
            document.title = 'Welcome to chph's blog';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
