<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>操作系统-设备管理 | 至繁归于至简 - chph&#39;s blog | steve_chph personal website</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="操作系统,设备管理">
    <meta name="description" content="设备管理 参考资料：  操作系统教程（第5版） - 费翔林 骆斌 编著   外部设备分类：  存储型设备 磁带机、磁盘机等  I/O型设备 显示器、打印机、通信设备等   设备管理通常使用I/O中断、缓冲区管理、通道、设备驱动调度等多种技术，这很好地克服了由于设备和CPU速度不匹配所引起的问题，使得主机和设备能够并行工作，提高设备的使用效率 另外操作系统将所有设备都抽象成文件，将其统一在文件系统之">
<meta name="keywords" content="操作系统,设备管理">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统-设备管理">
<meta property="og:url" content="http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/index.html">
<meta property="og:site_name" content="至繁归于至简 - chph&#39;s blog">
<meta property="og:description" content="设备管理 参考资料：  操作系统教程（第5版） - 费翔林 骆斌 编著   外部设备分类：  存储型设备 磁带机、磁盘机等  I/O型设备 显示器、打印机、通信设备等   设备管理通常使用I/O中断、缓冲区管理、通道、设备驱动调度等多种技术，这很好地克服了由于设备和CPU速度不匹配所引起的问题，使得主机和设备能够并行工作，提高设备的使用效率 另外操作系统将所有设备都抽象成文件，将其统一在文件系统之">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2019/12/21/aM4kPUBHnY2cT7j.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/5STvlp3WBaPtHUA.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/uVN8UKqvzTlBk6d.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/1fZcVH3OPW47qXB.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/NuFKQzmCBInerDU.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/683z5mKg1VXpZUn.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/gOltdQhcBAF54Kk.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/Hq67XgCUdfrAsV1.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/Kv7YH1RzAw8F9kC.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/u2MPH9SX4TiZBhK.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/KqB9uFSQWptaNcV.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/DZq8jKNvBlQ9rUC.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/KCOaNyq7Vodt3mB.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/MbDGkVi1LUdwXFy.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/lwGQBmAJYzFc3hf.png">
<meta property="og:image" content="http://qq876684433.github.io/home/steve/.config/Typora/typora-user-images/1576918288946.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/M7sgu4CvDaklIzU.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvukqJ.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvuZI1.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/Qv3Xlt.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/CUKbimLYEfwB1Wd.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/HXRmZKNVJtI5a4D.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvNnJg.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/mDnGgI7EaT6kRjS.png">
<meta property="og:image" content="https://i.loli.net/2019/12/21/93Hm1tQTsPEL5jK.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvNTTf.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvNqfg.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvUcBq.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/12/21/QvNvXn.png">
<meta property="og:updated_time" content="2019-12-21T10:16:05.344Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="操作系统-设备管理">
<meta name="twitter:description" content="设备管理 参考资料：  操作系统教程（第5版） - 费翔林 骆斌 编著   外部设备分类：  存储型设备 磁带机、磁盘机等  I/O型设备 显示器、打印机、通信设备等   设备管理通常使用I/O中断、缓冲区管理、通道、设备驱动调度等多种技术，这很好地克服了由于设备和CPU速度不匹配所引起的问题，使得主机和设备能够并行工作，提高设备的使用效率 另外操作系统将所有设备都抽象成文件，将其统一在文件系统之">
<meta name="twitter:image" content="https://i.loli.net/2019/12/21/aM4kPUBHnY2cT7j.png">
    
        <link rel="alternate" type="application/atom+xml" title="至繁归于至简 - chph&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">steve_chph</h5>
          <a href="mailto:chph13420146901@gmail.com" title="chph13420146901@gmail.com" class="mail">chph13420146901@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/QQ876684433" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/custom"  >
                <i class="icon icon-lg icon-link"></i>
                测试
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">操作系统-设备管理</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">操作系统-设备管理</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-12-21T01:44:20.000Z" itemprop="datePublished" class="page-time">
  2019-12-21
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/操作系统/">操作系统</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/操作系统/笔记/">笔记</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#设备管理"><span class="post-toc-number">1.</span> <span class="post-toc-text">设备管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#I-O硬件原理"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">I/O硬件原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#I-O系统"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">I/O系统</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#I-O控制方式"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">I/O控制方式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#轮询方式"><span class="post-toc-number">1.1.2.1.</span> <span class="post-toc-text">轮询方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#中断方式"><span class="post-toc-number">1.1.2.2.</span> <span class="post-toc-text">中断方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DMA方式"><span class="post-toc-number">1.1.2.3.</span> <span class="post-toc-text">DMA方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#通道方式"><span class="post-toc-number">1.1.2.4.</span> <span class="post-toc-text">通道方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设备控制器"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">设备控制器</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#I-O软件原理"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">I/O软件原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#中断处理程序"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">中断处理程序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设备驱动程序"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">设备驱动程序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#独立于设备的I-O软件"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">独立于设备的I/O软件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用户空间的I-O软件"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">用户空间的I/O软件</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#缓冲技术"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">缓冲技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单缓冲"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">单缓冲</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#双缓冲"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">双缓冲</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多缓冲"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">多缓冲</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#驱动调度技术"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">驱动调度技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#磁盘的物理结构"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">磁盘的物理结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#循环排序"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">循环排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#优化分布"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">优化分布</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#搜查定位"><span class="post-toc-number">1.4.4.</span> <span class="post-toc-text">搜查定位</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#先来先服务算法FIFO-FCFS"><span class="post-toc-number">1.4.4.1.</span> <span class="post-toc-text">先来先服务算法FIFO/FCFS</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#最短查找时间优先算法SSTF"><span class="post-toc-number">1.4.4.2.</span> <span class="post-toc-text">最短查找时间优先算法SSTF</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#扫描算法SCAN"><span class="post-toc-number">1.4.4.3.</span> <span class="post-toc-text">扫描算法SCAN</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#分步扫描算法N-step-Scan"><span class="post-toc-number">1.4.4.4.</span> <span class="post-toc-text">分步扫描算法N-step-Scan</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#电梯调度算法-LOOK算法"><span class="post-toc-number">1.4.4.5.</span> <span class="post-toc-text">电梯调度算法/LOOK算法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#循环扫描算法C-SCAN"><span class="post-toc-number">1.4.4.6.</span> <span class="post-toc-text">循环扫描算法C-SCAN</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FSCAN算法"><span class="post-toc-number">1.4.4.7.</span> <span class="post-toc-text">FSCAN算法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#后进先出算法LIFO"><span class="post-toc-number">1.4.4.8.</span> <span class="post-toc-text">*后进先出算法LIFO</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#优先级Priority"><span class="post-toc-number">1.4.4.9.</span> <span class="post-toc-text">*优先级Priority</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#提高磁盘I-O速度的方法"><span class="post-toc-number">1.4.5.</span> <span class="post-toc-text">提高磁盘I/O速度的方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#提前读"><span class="post-toc-number">1.4.5.1.</span> <span class="post-toc-text">提前读</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#延迟写"><span class="post-toc-number">1.4.5.2.</span> <span class="post-toc-text">延迟写</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#虚拟盘"><span class="post-toc-number">1.4.5.3.</span> <span class="post-toc-text">虚拟盘</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#设备分配"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">设备分配</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设备独立性"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">设备独立性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设备分配-1"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">设备分配</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设备分配的数据结构"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">设备分配的数据结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设备类表"><span class="post-toc-number">1.5.3.1.</span> <span class="post-toc-text">设备类表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设备表"><span class="post-toc-number">1.5.3.2.</span> <span class="post-toc-text">设备表</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#虚拟设备"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">虚拟设备</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SPOOLing设计与实现"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">SPOOLing设计与实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#预输入程序"><span class="post-toc-number">1.6.1.1.</span> <span class="post-toc-text">预输入程序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#井管理程序"><span class="post-toc-number">1.6.1.2.</span> <span class="post-toc-text">井管理程序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#缓输出程序"><span class="post-toc-number">1.6.1.3.</span> <span class="post-toc-text">缓输出程序</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SPOOLing应用"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">SPOOLing应用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#打印机SPOOLing守护进程"><span class="post-toc-number">1.6.2.1.</span> <span class="post-toc-text">打印机SPOOLing守护进程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#网络通信SPOOLing守护进程"><span class="post-toc-number">1.6.2.2.</span> <span class="post-toc-text">网络通信SPOOLing守护进程</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-操作系统-设备管理"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">操作系统-设备管理</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-12-21 09:44:20" datetime="2019-12-21T01:44:20.000Z"  itemprop="datePublished">2019-12-21</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/操作系统/">操作系统</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/操作系统/笔记/">笔记</a></li></ul></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="设备管理"><a href="#设备管理" class="headerlink" title="设备管理"></a>设备管理</h1><blockquote>
<p>参考资料：</p>
<ul>
<li>操作系统教程（第5版） - 费翔林 骆斌 编著</li>
</ul>
</blockquote>
<p>外部设备分类：</p>
<ul>
<li><p>存储型设备</p>
<p>磁带机、磁盘机等</p>
</li>
<li><p>I/O型设备</p>
<p>显示器、打印机、通信设备等</p>
</li>
</ul>
<p>设备管理通常使用I/O中断、缓冲区管理、通道、设备驱动调度等多种技术，这很好地克服了由于<strong>设备和CPU速度不匹配</strong>所引起的问题，使得主机和设备能够并行工作，提高设备的使用效率</p>
<p>另外操作系统将所有设备都<strong>抽象成文件</strong>，将其统一在文件系统之下，赋予文件属性，对设备的操作类似于对文件的操作，优点是：</p>
<ul>
<li>尽可能统一文件和设备的I/O的处理</li>
<li>尽可能把设备文件和普通文件纳入统一保护机制下</li>
</ul>
<p>为了方便用户或者高层软件使用，设备管理还<strong>对各种设备进行抽象</strong>，配置设备驱动程序，屏蔽物理细节和操作过程，提供统一使用界面，因此设备管理应该具备以下功能：</p>
<ul>
<li>设备中断处理</li>
<li>缓冲区管理</li>
<li>设备分配和去配</li>
<li>设备驱动调度</li>
<li>实现虚拟设备</li>
</ul>
<h2 id="I-O硬件原理"><a href="#I-O硬件原理" class="headerlink" title="I/O硬件原理"></a>I/O硬件原理</h2><h3 id="I-O系统"><a href="#I-O系统" class="headerlink" title="I/O系统"></a>I/O系统</h3><p>设备分类</p>
<ul>
<li><p>按照操作特性</p>
<ul>
<li><p>输入型设备</p>
</li>
<li><p>输出型设备</p>
</li>
<li><p>存储型设备</p>
<ul>
<li><p>顺序存取存储设备</p>
<p>严格依赖信息的物理位置进行定位和读写，如磁带</p>
</li>
<li><p>直接存取存储设备（随机存取存储设备）</p>
<p>存取任何一个物理块所需时间几乎不依赖于此信息所处位置，如磁盘</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>按照信息交换单位</p>
<ul>
<li><p>字符设备</p>
<p>通常是输入型设备和输出型设备，它与内存进行信息交换的单位是<strong>字节</strong>，即一次交换一个或多个字节</p>
</li>
<li><p>块设备</p>
<p>通常是存储型设备，所谓块是存储介质上<strong>连续信息所组成的一个区域</strong>，块设备每次与内存交换一块或多块信息</p>
</li>
</ul>
</li>
</ul>
<p>不同设备之间的物理特性的差异：</p>
<ul>
<li>数据传输速率差别很大</li>
<li>数据表示方式和传输单位不同</li>
<li>错误的性质、报错方式以及应对措施都不一样</li>
</ul>
<h3 id="I-O控制方式"><a href="#I-O控制方式" class="headerlink" title="I/O控制方式"></a>I/O控制方式</h3><p>CPU和设备并行工作能大幅提高<strong>计算机系统效率</strong>和<strong>资源利用率</strong></p>
<h4 id="轮询方式"><a href="#轮询方式" class="headerlink" title="轮询方式"></a>轮询方式</h4><p>程序直接控制方式，使用查询指令测试设备控制器的<strong>忙闲状态位</strong>，确定内存和设备是否能交换数据</p>
<p>轮询方式的传输过程：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/aM4kPUBHnY2cT7j.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>缺点：</p>
<ul>
<li>CPU轮询设备当前的状态会终止原程序的执行（完成I/O操作后才能继续往后面执行，同步方式），浪费宝贵的时间</li>
<li>I/O准备就绪后，需要CPU参与数据传输工作</li>
<li>CPU和设备只能串行工作，使<strong>主机不能充分发挥功效</strong>，<strong>设备也不能得到合理利用</strong>，整个系统效率很低</li>
</ul>
<h4 id="中断方式"><a href="#中断方式" class="headerlink" title="中断方式"></a>中断方式</h4><p>中断方式要求：CPU与设备控制器之间存在中断请求线，设备控制器的状态寄存器有相应的中断允许位</p>
<p>中断方式的传输数据过程：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/5STvlp3WBaPtHUA.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>缺点：</p>
<ul>
<li>如果设备控制器的数据缓冲区较小，每次当缓冲器装满后便会发生中断，那么在数据传输过过程中会发生多次中断，耗用大量的CPU时间</li>
<li>当系统的设备较多，并且都通过中断方式实现并行，那么中断次数会急剧增加，造成CPU来不及响应或丢失数据的现象</li>
</ul>
<p>优点：</p>
<ul>
<li>中断方式I/O不必忙式轮询设备，可实现<strong>CPU和设备部分并行操作</strong></li>
<li>与轮询方式I/O相比，<strong>CPU资源得到更充分的利用</strong></li>
</ul>
<h4 id="DMA方式"><a href="#DMA方式" class="headerlink" title="DMA方式"></a>DMA方式</h4><p>直接存储器存取（Direct Memory Access，DMA）方式，内存和设备之间有一条数据通路成块地传输数据，无须CPU干预，<strong>实际数据传输操作由DMA直接完成</strong></p>
<p>为了实现直接存储器存取操作，还需要以下逻辑部件：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/uVN8UKqvzTlBk6d.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>控制器从设备读取数据后不立即将其送入内存，而需要内部缓冲区的原因：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/1fZcVH3OPW47qXB.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>DMA不仅设有中断机制，还有DMA传输控制器：若出现DMA与CPU同时经总线访问内存的情况，CPU总是把总线占有权让给DAM，这种方式称为”周期窃取“，窃取时间通常是一个存取周期</p>
<p>DMA方式实现线路简单，价格低廉，<strong>适用于小型和微型计算机</strong>，但是不能满足大中型计算机（使用通道技术）</p>
<h4 id="通道方式"><a href="#通道方式" class="headerlink" title="通道方式"></a>通道方式</h4><p>引入通道技术的目的：</p>
<ul>
<li>充分发挥CPU和设备之间的并行工作能力</li>
<li>让种类繁多且物理特性各异的设备能够以标准的接口连接到系统中</li>
</ul>
<p>通道又称为I/O处理器，能完成内存和设备之间的信息传送，与CPU并行地执行操作，由通道管理和控制I/O操作。具有通道装置的计算机系统的<strong>主机、通道、控制器和设备</strong>之间<strong>采用四级连接、实施三级控制</strong>：</p>
<ul>
<li>一个CPU通常可以连接若干通道；一个通道可以连接若干控制器；一个控制器可以连接若干设备</li>
<li>CPU通过执行I/O指令对通道实施控制；通道通过执行通道命令对控制器实施控制；控制器发出动作序列对设备实施控制，设备执行相应的I/O操作</li>
</ul>
<p>通道方式下的I/O操作过程：CPU在执行主程序时遇到I/O请求，启动在指定通道上选址的设备，一旦启动成功，通道开始控制设备进行操作，这时CPU就可以执行其他任务并与通道并行工作，直到I/O操作完成；当通道发出I/O操作结束中断时，处理器才响应并停止当前工作，转而处理I/O操作结束事件</p>
<h3 id="设备控制器"><a href="#设备控制器" class="headerlink" title="设备控制器"></a>设备控制器</h3><p>设备控制器是CPU和设备之间的接口，它<strong>接收从CPU发来的命令，控制设备操作</strong>，实现内存和设备之间的数据传输；设备控制器是可编址设备，当它连接多台设备时，应具有多个设备地址</p>
<p>设备控制器的主要功能：</p>
<ul>
<li>接收和识别CPU或通道发来的命令（控制寄存器和译码器）</li>
<li>实现数据交换（数据缓冲寄存器或数据缓冲区），包括设备和控制器之间、控制器与内存之间（通过数据总线或通道）的数据传输</li>
<li>发现和记录设备及自身的状态信息（状态寄存器），供CPU处理使用</li>
<li>设备地址识别（地址译码器和对设备操作进行控制的I/O逻辑）</li>
</ul>
<h2 id="I-O软件原理"><a href="#I-O软件原理" class="headerlink" title="I/O软件原理"></a>I/O软件原理</h2><p>I/O软件设计的总目标：</p>
<ul>
<li><strong>高效率</strong>： 改善设备效率， 尤其是磁盘I/O操作的效率</li>
<li><strong>通用性</strong>： 用统一的标准来管理所有设备</li>
</ul>
<p>设计思路：</p>
<ul>
<li>把软件组织成<strong>层次结构</strong></li>
<li>低层软件用来屏蔽硬件细节</li>
<li>高层软件向用户提供简洁、 友善的界面</li>
</ul>
<p>主要考虑的问题：</p>
<ul>
<li><p><strong>设备无关性</strong>： 编写访问文件的程序与具体设备无关</p>
</li>
<li><p><strong>出错处理</strong>： 低层软件能处理的错误不让高层软件感知</p>
<p>使得用户体验较好</p>
</li>
<li><p><strong>同步/异步传输</strong>： 支持阻塞和中断驱动两种工作方式</p>
<p>可以不同步的工作尽量让它异步执行，提高系统效率；对于有数据依赖的IO操作（只能同步，只能使用同步，否则会出错）</p>
</li>
<li><p><strong>缓冲技术</strong>： 建立数据缓冲区， 提高吞吐率</p>
<p>充分考虑缓冲技术，提高性能；建立缓冲区不一定要使用内存空间，也可以考虑使用相对高速的磁盘</p>
</li>
</ul>
<p>软件层次结构：</p>
<ul>
<li>中断处理程序</li>
<li>设备驱动程序</li>
<li>独立于设备的I/O软件</li>
<li>用户空间的I/O软件</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/NuFKQzmCBInerDU.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="中断处理程序"><a href="#中断处理程序" class="headerlink" title="中断处理程序"></a>中断处理程序</h3><ul>
<li>位于操作系统底层， 与硬件设备密切相关， 与系统其余部分尽可能少地发生联系</li>
<li>进程请求I/O操作时， 通常被挂起， 直到<strong>数据传输结束后并产生I/O中断</strong>时， 操作系统接管CPU后转向中断处理程序</li>
<li>当设备向CPU提出中断请求时， CPU响应请求并转入中断处理程序</li>
</ul>
<p>功能：</p>
<p>检查设备状态寄存器内容， 判断产生中断的原因，<strong>根据I/O操作的完成情况</strong>进行相应的处理</p>
<ul>
<li>如果<strong>数据传输有错</strong>， 向上层软件报告设备的出错信息， 实施重新执行</li>
<li>如果<strong>正常结束</strong>， 唤醒等待传输的进程， 使其转换为就绪态</li>
<li>如果<strong>有等待传输的I/O命令</strong>， 通知相关软件启动下一个I/O请求</li>
</ul>
<h3 id="设备驱动程序"><a href="#设备驱动程序" class="headerlink" title="设备驱动程序"></a>设备驱动程序</h3><p>设备驱动程序包括<strong>与设备密切相关的所有代码</strong></p>
<p>任务：从<strong>独立于设备的软件</strong>中接收并执行I/O请求</p>
<ul>
<li>把用户提交的<strong>逻辑I/O请求</strong>转化为<strong>物理I/O操作的启动和执行</strong></li>
<li>监督设备是否正确执行， 管理数据缓冲区， 进行必要的纠错处理</li>
</ul>
<p>功能：</p>
<ul>
<li>设备初始化<ul>
<li>在系统初次启动或设备传输数据时， 预置设备和控制器以及通道状态</li>
</ul>
</li>
<li>执行设备驱动例程<ul>
<li>负责启动设备， 进行数据传输</li>
<li>对于具有通道方式， 还负责生成通道指令和通道程序， 启动通道工作</li>
</ul>
</li>
<li>调用和执行中断处理程序<ul>
<li>负责处理设备和控制器及通道所发出的各种中断</li>
</ul>
</li>
</ul>
<p>每个设备驱动程序只处理<strong>一种设备</strong>， 或者<strong>一类紧密相关的设备</strong></p>
<p>设备驱动程序分为<strong>整体驱动程序</strong>和<strong>分层驱动程序</strong></p>
<ul>
<li>整体驱动程序<strong>直接向操作系统提供接口和控制硬件</strong><ul>
<li>适用于功能简单的驱动程序， 效率较高， 但较难迁移</li>
</ul>
</li>
<li>分层驱动程序<strong>将驱动程序分成多层</strong>， 放在栈中， 系统接到I/O请求时先调用栈顶的驱动程序， 栈顶的驱动程序可以直接处理请求或向下调用更低层的驱动程序， 直至请求被处理<ul>
<li>适用于功能复杂、 重用性要求较高的驱动程序， 结构清晰且便于移植， 但会增加一部分系统开销</li>
</ul>
</li>
</ul>
<h3 id="独立于设备的I-O软件"><a href="#独立于设备的I-O软件" class="headerlink" title="独立于设备的I/O软件"></a>独立于设备的I/O软件</h3><p>执行适用于所有设备的常用I/O功能， 并向用户层软件提供一致性接口（屏蔽物理设备的细节）</p>
<p>功能：</p>
<ul>
<li><p>设备命名： 通过路径名寻址设备</p>
</li>
<li><p>设备保护： 检查用户是否有权访问所申请设备</p>
<p>大多数大中型计算机系统中，用户进程对I/O设备的直接访问是绝对禁止的，<strong>I/O指令定义为特权指令</strong>，通过<strong>系统调用方式</strong>间接地供用户使用</p>
</li>
<li><p>提供与设备无关的数据单位： 字符数量， 块尺寸</p>
<p><img src="https://i.loli.net/2019/12/21/683z5mKg1VXpZUn.png" alt></p>
</li>
<li><p>缓冲技术： 传输速率， 时间约束， 不能直接送达目的地</p>
<p>通过缓冲区来消除填满速率和清空速率的影响，通常在内核空间开辟缓冲区，数据在缓冲区中缓冲后，再在用户缓冲区和设备之间传输</p>
</li>
<li><p>设备分配和状态跟踪： 分配不同类型的设备</p>
<p>设备分配策略有：静态分配、动态分配、虚拟分配</p>
</li>
<li><p>错误处理和报告： 驱动程序无法处理的错误</p>
<p>错误应该在尽量接近硬件的地方加以处理，如果控制器发现错误，应该设法纠正和加以解决；如果发现错误处理不成功或者不能处理错误，可向独立于设备的I/O软件报错，此后错误的处理就与设备驱动程序无关</p>
<p>即<strong>与设备无关的错误、驱动程序无法/不能处理的错误</strong>应该由独立于设备的I/O软件完成：例如I/O编程指令错误（无效操作码、无效设备、无效缓冲区地址等），读关键系统数据结构等出错</p>
</li>
</ul>
<h3 id="用户空间的I-O软件"><a href="#用户空间的I-O软件" class="headerlink" title="用户空间的I/O软件"></a>用户空间的I/O软件</h3><ul>
<li>库函数<ul>
<li>一小部分I/O软件不在操作系统中， 是与应用程序链接在一起的库函数， 甚至完全由运行于用户态的程序组成</li>
<li>系统调用通常由库函数封装后供用户使用， 封装函数只是<strong>将系统调用所用的参数放在合适位置</strong>， 然后执行访管指令来陷入内核， 再<strong>由内核函数实现真正的I/O操作</strong></li>
</ul>
</li>
<li>SPOOLing软件<br>在<strong>内核外运行的系统I/O软件</strong>， 采用<strong>预输入、 缓输出和井管理技术</strong>， 通过创建守护进程和特殊目录<strong>解决独占型设备的空占问题</strong></li>
</ul>
<h2 id="缓冲技术"><a href="#缓冲技术" class="headerlink" title="缓冲技术"></a>缓冲技术</h2><p>目的：</p>
<ul>
<li><p>解决<strong>CPU与设备之间速度不匹配的</strong>矛盾</p>
</li>
<li><p>协调<strong>逻辑记录大小</strong>和<strong>物理记录大小不一致</strong>的问题</p>
<p>例如读取磁盘时我们一般读30、50或者80字节等，但是磁盘往往是以一个扇区（512字节）为基本单位来存储和读取的</p>
<p><img src="https://i.loli.net/2019/12/21/gOltdQhcBAF54Kk.png" alt></p>
</li>
<li><p>提高CPU和设备的并行性</p>
</li>
<li><p>减少I/O操作对CPU的中断次数</p>
</li>
<li><p>放宽对CPU中断响应时间的要求</p>
</li>
</ul>
<p>缓冲区：在内存中开辟的存储区， 专门用于临时存放I/O操作的数据</p>
<p> 操作</p>
<ul>
<li>写操作： 将数据送至缓冲区， 直到装满， 进程继续计算，同时系统将缓冲区的内容写到设备上</li>
<li>读操作： 系统将设备上的物理记录读至缓冲区， 根据要求将当前所需要的数据从缓冲区中读出并传送给进程</li>
</ul>
<h3 id="单缓冲"><a href="#单缓冲" class="headerlink" title="单缓冲"></a>单缓冲</h3><p>操作系统在<strong>主存的系统区</strong>中开设一个缓冲区</p>
<ul>
<li>输入： 将数据读至缓冲区， 系统将缓冲区数据送至用户区， 应用程序对数据进行处理， 同时系统读入接下来的数据</li>
<li>输出： 把数据从用户区复制到缓冲区， 系统将数据输出后， 应用程序继续请求输出</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/Hq67XgCUdfrAsV1.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="双缓冲"><a href="#双缓冲" class="headerlink" title="双缓冲"></a>双缓冲</h3><p>使用两个缓冲区</p>
<ul>
<li>输入： 设备先将数据输入缓冲区1， 系统从缓冲区1把数据传到用户区， 供应用程序处理， 同时设备将数据传送到缓冲区2</li>
<li>输出： 应用程序将数据从用户传送到缓冲区1， 系统将数据传送到设备， 同时应用程序将数据传送到缓冲区2</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/Kv7YH1RzAw8F9kC.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>双缓冲技术实际上是两个缓冲区交替使用，即其中一个缓冲区在输入（从设备到缓冲区）时，另一个缓冲区可以读取（从缓冲区到用户区），但并不是说输入和输出同时进行，只是说把输入或者输出的两个阶段（设备和缓冲区之间、缓冲区和用户区之间）的操作分别在两个缓冲区中进行，只要两个缓冲区不同时满或者同时为空，进程或设备都无需等待</p>
<h3 id="多缓冲"><a href="#多缓冲" class="headerlink" title="多缓冲"></a>多缓冲</h3><p>操作系统分配一组缓冲区， 每个缓冲区度有指向下一个缓冲区的链接指针，最后一个缓冲区指针指向第一个缓冲区， 构成循环缓冲，缓冲区的大小等于物理记录的大小</p>
<ul>
<li>解决设备和进程速度不匹配的问题</li>
<li>为系统公共资源， 供进程共享并由系统统一分配和管理</li>
</ul>
<p>分类：</p>
<ul>
<li>输入缓冲区</li>
<li>输出缓冲区</li>
<li>处理缓冲区</li>
</ul>
<p>为了管理各类缓冲区，执行各种操作，必须引入<strong>缓冲区自动管理系统</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/u2MPH9SX4TiZBhK.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>



<h2 id="驱动调度技术"><a href="#驱动调度技术" class="headerlink" title="驱动调度技术"></a>驱动调度技术</h2><p>计算即可能会同时有若干传输请求来到并等待处理，必须采用一种调度策略，能够按照最佳次序执行要求访问的诸多请求，这叫做<strong>驱动调度</strong>，所使用的算法叫做<strong>驱动调度算法</strong></p>
<p>除了<strong>I/O请求的优化分布</strong>外，信息在磁盘上的排列方式、存储空间的分配方法都能影响存取访问速度</p>
<h3 id="磁盘的物理结构"><a href="#磁盘的物理结构" class="headerlink" title="磁盘的物理结构"></a>磁盘的物理结构</h3><ul>
<li>一个盘面上的读写磁头的轨迹称为<strong>磁道</strong></li>
<li>读写磁头写的所有磁道所组成的圆柱体称为<strong>柱面</strong></li>
<li>一个磁道又可划分成多个<strong>扇区（物理块）</strong></li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/KqB9uFSQWptaNcV.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>文件信息通常并不记录在统一盘面的磁道上，而是<strong>记录在同一柱面的不同磁道上</strong>，这样可减少移动臂的移动次数，缩短存取信息的时间</p>
<p>为了访问磁盘上的一条物理记录，必须给出三个参数：<strong>柱面号、磁头号、扇区号</strong></p>
<h3 id="循环排序"><a href="#循环排序" class="headerlink" title="循环排序"></a>循环排序</h3><p>在最少的旋转圈数内完成位于同一柱面的访问请求</p>
<p><strong>旋转位置测定硬件</strong>和<strong>多磁头同时读写技术</strong>有利于提高旋转调度的效率；如果无法测定磁头当前位置，那么就需要多花费半周时间来定位第一个读取的记录块</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/DZq8jKNvBlQ9rUC.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/KCOaNyq7Vodt3mB.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="优化分布"><a href="#优化分布" class="headerlink" title="优化分布"></a>优化分布</h3><p>信息在存储空间中的排列方式会影响存取等待时间，例子：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/MbDGkVi1LUdwXFy.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="搜查定位"><a href="#搜查定位" class="headerlink" title="搜查定位"></a>搜查定位</h3><p>对于磁盘，除了<strong>旋转延迟</strong>外，还有<strong>搜查寻道延迟</strong>；因此对于磁盘设备</p>
<ul>
<li>在启动前按<strong>驱动调度策略</strong>对访问的I/O请求进行优化排序十分必要</li>
<li>除了使旋转圈数达到最少的调度策略外，还应该考虑<strong>移动臂的移动时间最短的调度策略</strong></li>
</ul>
<h4 id="先来先服务算法FIFO-FCFS"><a href="#先来先服务算法FIFO-FCFS" class="headerlink" title="先来先服务算法FIFO/FCFS"></a>先来先服务算法FIFO/FCFS</h4><p>磁盘臂是随机移动的，不考虑各I/O请求之间的相对次序和移动臂当前所处位置</p>
<ul>
<li>按顺序处理请求</li>
<li>对于所有进程是公平的</li>
</ul>
<p>缺点：进程等待I/O请求的时间会很长，寻道性能较差</p>
<h4 id="最短查找时间优先算法SSTF"><a href="#最短查找时间优先算法SSTF" class="headerlink" title="最短查找时间优先算法SSTF"></a>最短查找时间优先算法SSTF</h4><p>最短服务时间优先(SSTF, Shortest Service Time First)</p>
<ul>
<li>选择使磁头臂<strong>从当前位置开始移动最少的磁盘I/O请求</strong>， 因此SSTF策略总是选择导致最小寻道时间的请求</li>
<li>总是选择最小寻道时间<strong>并不能保证平均寻道时间最小</strong>， 但是，它的性能比FIFO更好</li>
</ul>
<p>缺点：此算法存在“饥饿”现象，随着靠近当前磁头位置读写请求的不断到来，使得到来时间较早但距离当前磁头位置较远的I/O请求服务被无限期地推迟</p>
<h4 id="扫描算法SCAN"><a href="#扫描算法SCAN" class="headerlink" title="扫描算法SCAN"></a>扫描算法SCAN</h4><ul>
<li>要求磁头臂<strong>仅仅沿一个方向移动</strong>， 并在途中满足所有为完成的请求， <strong>直到它到达这个方向上的最后一个磁道</strong>；它与电梯调度算法不同之处在于：<ul>
<li><strong>即使当前移动方向暂时没有I/O请求，移动臂也需要扫描到头</strong></li>
</ul>
</li>
<li>接着反转服务方向， 沿着相反方向扫描， 同样按顺序完成所有请求</li>
</ul>
<p>缺点：</p>
<ul>
<li>扫描算法<strong>偏爱那些最接近里面或者靠近外面（即盘面两端）的请求</strong>，对最近扫描所跨区域的I/O请求的响应速度会较慢</li>
<li>每次都移动到柱面尽头，无论前方是否有访问请求，效率较低</li>
</ul>
<h4 id="分步扫描算法N-step-Scan"><a href="#分步扫描算法N-step-Scan" class="headerlink" title="分步扫描算法N-step-Scan"></a>分步扫描算法N-step-Scan</h4><p>进程重复请求同一磁道会垄断整个设备， “造成磁头臂的粘性”，采用分步扫描可避免这类问题</p>
<ul>
<li>把磁盘请求队列分成长度为N的子队列，按FIFO算法依次处理每个子队列，每一次用SCAN处理一个子队列</li>
<li>在处理一个队列时， <strong>新请求必须添加到其他某个队列中</strong></li>
<li>如果<strong>在扫描的最后剩下的请求数小于N， 则它们全部将在下一次扫描时处理</strong></li>
</ul>
<p>当N很大时， N-step-SCAN的性能接近SCAN； 当N=1时， 实际上是FIFO</p>
<h4 id="电梯调度算法-LOOK算法"><a href="#电梯调度算法-LOOK算法" class="headerlink" title="电梯调度算法/LOOK算法"></a>电梯调度算法/LOOK算法</h4><p>它是扫描算法的一种改进，无访问请求时，移动臂停止不动；有访问请求时，移动臂按电梯规律移动：</p>
<ul>
<li>每次总是选择沿移动臂的移动方向上最近的那个柱面<ul>
<li>若一个柱面上有多个请求，还需要旋转优化</li>
</ul>
</li>
<li>如果当前移动方向上没有但相反方向有访问请求时，就改变移动臂的移动方向，然后处理所遇到的最近的I/O请求</li>
</ul>
<p><strong>移动臂移动方向</strong>和<strong>空闲时移动臂停留的位置</strong>都需要记录下来</p>
<p>说明：磁盘柱面号通常由外向里递增，磁头越向外，所处的柱面号越小，反之越大</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/lwGQBmAJYzFc3hf.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="循环扫描算法C-SCAN"><a href="#循环扫描算法C-SCAN" class="headerlink" title="循环扫描算法C-SCAN"></a>循环扫描算法C-SCAN</h4><p>对于不断有大量柱面均匀分布的存取请求进入系统的情况，循环扫描算法效率很高</p>
<ul>
<li>把扫描限定在一个方向</li>
<li>当访问到沿某个方向的最后一个磁道时， 磁头臂返回到磁盘相反方向磁道的末端， 并再次开始扫描</li>
</ul>
<p>移动臂总是从0号柱面至最大柱面顺序扫描，然后直接返回0号柱面重复进行，归途中不再提供服务，构成一个循环，缩短处理新来的请求的最大延迟</p>
<h4 id="FSCAN算法"><a href="#FSCAN算法" class="headerlink" title="FSCAN算法"></a>FSCAN算法</h4><ul>
<li>使用两个子队列</li>
<li>当开始扫描时， <strong>所有请求都在一个队列中</strong>， 而<strong>另一个队列为空</strong></li>
<li>在扫描过程中， <strong>所有新到的请求都被放入另一个队列中</strong></li>
<li>因此， 对新请求的服务延迟到处理完成所有老请求之后</li>
</ul>
<h4 id="后进先出算法LIFO"><a href="#后进先出算法LIFO" class="headerlink" title="*后进先出算法LIFO"></a>*后进先出算法LIFO</h4><ul>
<li>在事务处理系统中， 把设备资源提供给最近的用户， 会导致磁头臂在一个顺序文件中移动时移动得很少， 甚至不移动</li>
<li>利用这种局部性可以提高吞吐量， 减少队列长度只要一个作业积极地使用文件系统， 它就可以尽可能快地得到处理</li>
<li>如果由于工作量大而磁盘保持忙状态， 就有可能出现饿死的情况</li>
<li>当一个作业已经往队列中送入一个I/O请求， 并且错过了可以提供服务的位置时， 该作业就有可能永远得不到服务， 除非它之前的队列变为空</li>
</ul>
<h4 id="优先级Priority"><a href="#优先级Priority" class="headerlink" title="*优先级Priority"></a>*优先级Priority</h4><ul>
<li>这种方法并不会优化磁盘的使用率， 但可以满足操作系统的其他目标</li>
<li>通常<strong>比较短的批作业和交互作业的优先级较高</strong>， 而<strong>较长计算时间的长作业优先级低</strong>， 这就使得大量短作业能够迅速地通过系统， 并且可以提供比较好的交互响应时间</li>
<li>但是长作业不得不等待很长的时间</li>
</ul>
<h3 id="提高磁盘I-O速度的方法"><a href="#提高磁盘I-O速度的方法" class="headerlink" title="提高磁盘I/O速度的方法"></a>提高磁盘I/O速度的方法</h3><p>通常为磁盘设置数据缓冲区高速缓存，这样能够显著缩短等待磁盘I/O的时间</p>
<h4 id="提前读"><a href="#提前读" class="headerlink" title="提前读"></a>提前读</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/home/steve/.config/Typora/typora-user-images/1576918288946.png" alt="1576918288946" title>
                </div>
                <div class="image-caption">1576918288946</div>
            </figure>

<h4 id="延迟写"><a href="#延迟写" class="headerlink" title="延迟写"></a>延迟写</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/M7sgu4CvDaklIzU.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvukqJ.png" alt="QvukqJ.png" title>
                </div>
                <div class="image-caption">QvukqJ.png</div>
            </figure>

<h4 id="虚拟盘"><a href="#虚拟盘" class="headerlink" title="虚拟盘"></a>虚拟盘</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvuZI1.png" alt="QvuZI1.png" title>
                </div>
                <div class="image-caption">QvuZI1.png</div>
            </figure>



<h2 id="设备分配"><a href="#设备分配" class="headerlink" title="设备分配"></a>设备分配</h2><h3 id="设备独立性"><a href="#设备独立性" class="headerlink" title="设备独立性"></a>设备独立性</h3><p>作业执行前对设备提出申请时， 指定某台具体的物理设备会让设备分配变得简单， 但如果所指定设备出现故障， 即便计算机系统中有同类设备也不能运行</p>
<p>定义：用户通常不指定物理设备， 而是指定逻辑设备， 使得<strong>用户作业和物理设备分离开来</strong>， 再通过其它途径建立逻辑设备和物理设备之间的映射</p>
<ul>
<li>逻辑设备名（号）是用户命名的，是可更改的</li>
<li>物理设备名（号）是系统规定的，是不可更改的</li>
</ul>
<p>设备管理的功能之一就是<strong>把逻辑设备名（号）转换成物理设备名（号）</strong>，为此系统需要提供逻辑设备名和物理设备名（设备地址）的对照表以供转换使用</p>
<p>优点：</p>
<ul>
<li>应用程序与具体物理设备无关，系统增减或变更设备时不需要修改源程序</li>
<li>易于<strong>应对I/O设备故障</strong>， 提高系统可靠性</li>
<li>增加<strong>设备分配的灵活性</strong>， 更有效地利用设备资源，实现多道程序设计</li>
</ul>
<h3 id="设备分配-1"><a href="#设备分配-1" class="headerlink" title="设备分配"></a>设备分配</h3><p>设备分类：</p>
<ul>
<li><p>独占型设备（静态分配）</p>
<p>例如光盘、磁带等</p>
<p>在作业执行前，将所要使用的设备全部分配给它（即<strong>运行前先申请</strong>），当作业执行过程中不再需要使用这类设备或作业执行结束将要撤离时再回收设备</p>
<p>优点：实现简单，能够防止系统死锁</p>
<p>缺点：降低设备利用率（因为在进程结束之前很长一段时间内，设备可能是空闲的）</p>
</li>
<li><p>共享设备（动态分配）</p>
<p>像磁盘这种共享型设备一般不需要分配，设备管理的主要工作是驱动调度和实施驱动</p>
<p>优点：设备利用率高</p>
<p>缺点：实现复杂，需要仔细检查以避免死锁</p>
</li>
<li><p>虚拟设备（虚拟分配）</p>
</li>
</ul>
<h3 id="设备分配的数据结构"><a href="#设备分配的数据结构" class="headerlink" title="设备分配的数据结构"></a>设备分配的数据结构</h3><h4 id="设备类表"><a href="#设备类表" class="headerlink" title="设备类表"></a>设备类表</h4><ul>
<li><p><strong>每类设备对应于设备类表的中一栏</strong></p>
</li>
<li><p>包括： 设备类， 总台数， 空闲台数， 设备表起始地址等</p>
</li>
<li><p>支持设备独立性时才会使用；进程申请设备时，是<strong>申请设备类表中的某一中逻辑设备</strong>，用以实现设备独立性</p>
</li>
</ul>
<h4 id="设备表"><a href="#设备表" class="headerlink" title="设备表"></a>设备表</h4><ul>
<li><strong>每类设备都有各自的设备表</strong>， 用来登记<strong>这类设备中的每台物理设备</strong></li>
<li>包括： 物理设备名（号） ， 逻辑设备名（号） ， 占有设备的进程号， 是否分配， 好/坏标志等</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/Qv3Xlt.png" alt="Qv3Xlt.png" title>
                </div>
                <div class="image-caption">Qv3Xlt.png</div>
            </figure>



<h2 id="虚拟设备"><a href="#虚拟设备" class="headerlink" title="虚拟设备"></a>虚拟设备</h2><p>SPOOLing技术：是用一类物理设备模拟另一类物理设备的技术，是使独占型设备变成共享型设备的一种技术</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/CUKbimLYEfwB1Wd.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="SPOOLing设计与实现"><a href="#SPOOLing设计与实现" class="headerlink" title="SPOOLing设计与实现"></a>SPOOLing设计与实现</h3><p>为了存放从输入设备输入的信息以及作业执行后的输出结果，系统在磁盘上开辟输入井和输出井，井是用作缓冲的存储区域；为此必须有“</p>
<ul>
<li>能将信息从输入设备输入磁盘输入缓冲区的“预输入程序”</li>
<li>能将信息从磁盘输出缓冲区输出至输出设备的“缓输出程序”</li>
<li>控制作业和磁盘缓冲区之间交换信息的“井管理程序”</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/HXRmZKNVJtI5a4D.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>系统有一张作业表来登记进入系统的所有作业的JCB，包含作业名、作业状态、预输入表位置、缓输出表位置等信息</p>
<ul>
<li>预输入表用来登记作业的各个输入文件的情况，包括设备类、文件名、信息长度及存放位置等</li>
<li>缓输出表用来登记作业的各个输出文件的情况，包括设备类、文件名、信息长度及存放位置等</li>
</ul>
<h4 id="预输入程序"><a href="#预输入程序" class="headerlink" title="预输入程序"></a>预输入程序</h4><p>其任务是<strong>控制信息从输入设备输入至输入井</strong>，<strong>填写预输入表</strong>以便在作业执行过程中要求输入信息时可以随时找到其存放位置</p>
<p>输入井中的作业状态：</p>
<ul>
<li><p>输入状态</p>
<p>作业信息正在从输入设备上预输入</p>
</li>
<li><p>收容状态</p>
<p>作业预输入完成，但未被选中执行</p>
</li>
<li><p>执行状态</p>
<p>作业已被选中运行，它在运行过程中可以从输入井中读取数据，也可以向输出井写入数据</p>
</li>
<li><p>完成状态</p>
<p>作业已经撤离，作业的输出结果等待缓输出</p>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvNnJg.png" alt="QvNnJg.png" title>
                </div>
                <div class="image-caption">QvNnJg.png</div>
            </figure>

<p>作业表的状态项指示哪些作业正在预输入，哪些作业已经完成预输入，哪些作业正在执行等，作业调度程序根据预定的调度算法<strong>选择处于收容状态的作业执行</strong></p>
<p>存放在井中的文件称为井文件，井文件被划分成<strong>等长的物理块</strong>，每块用于存放一条或多条逻辑记录，存放方式有：</p>
<ul>
<li>连接方式：类似于链表的方式</li>
<li>计算方式：类似于数组的方式</li>
</ul>
<h4 id="井管理程序"><a href="#井管理程序" class="headerlink" title="井管理程序"></a>井管理程序</h4><p>作业执行过程中要求启动某台设备进行I/O操作时，作业控制程序截获这个要求并调用井管理程序控制从输入井读取信息，或将信息送至输出井</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/mDnGgI7EaT6kRjS.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="缓输出程序"><a href="#缓输出程序" class="headerlink" title="缓输出程序"></a>缓输出程序</h4><p>当<strong>处理器空闲</strong>时，操作系统调用缓输出程序执行缓输出</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/21/93Hm1tQTsPEL5jK.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="SPOOLing应用"><a href="#SPOOLing应用" class="headerlink" title="SPOOLing应用"></a>SPOOLing应用</h3><p>实现方式：守护进程 + SPOOL文件目录，要进行输出的文件首先传送至SPOOL目录，然后在设备空闲时守护进程将SPOOL目录下的文件传送到设备</p>
<p>并且，守护进程是唯一有特权使用设备的进程</p>
<h4 id="打印机SPOOLing守护进程"><a href="#打印机SPOOLing守护进程" class="headerlink" title="打印机SPOOLing守护进程"></a>打印机SPOOLing守护进程</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvNTTf.png" alt="QvNTTf.png" title>
                </div>
                <div class="image-caption">QvNTTf.png</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvNqfg.png" alt="QvNqfg.png" title>
                </div>
                <div class="image-caption">QvNqfg.png</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvUcBq.png" alt="QvUcBq.png" title>
                </div>
                <div class="image-caption">QvUcBq.png</div>
            </figure>

<h4 id="网络通信SPOOLing守护进程"><a href="#网络通信SPOOLing守护进程" class="headerlink" title="网络通信SPOOLing守护进程"></a>网络通信SPOOLing守护进程</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s2.ax1x.com/2019/12/21/QvNvXn.png" alt="QvNvXn.png" title>
                </div>
                <div class="image-caption">QvNvXn.png</div>
            </figure>














        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-12-21T10:16:05.344Z" itemprop="dateUpdated">2019-12-21 18:16:05</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2019/12/21/操作系统-设备管理/" target="_blank" rel="external">http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/</a>
        
    </div>
    
    <footer>
        <a href="http://QQ876684433.github.io">
            <img src="/img/avatar.jpg" alt="steve_chph">
            steve_chph
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设备管理/">设备管理</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&title=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&title=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/12/21/操作系统-文件管理/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">操作系统-文件管理</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/12/17/CPP输入输出/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">CPP输入输出</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢你~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>steve_chph &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&title=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&title=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统-设备管理》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/21/操作系统-设备管理/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACs0lEQVR42u3a226DQAwFwPz/T6fPVRt6fFmSSsNTlFDwUGnX2H484uP547j+fnKF63MeJw48PDy8cejJDRLMq7tcB508viRmPDw8vNO86xDzzSAPpXflPGY8PDy8z+Hlm0Ge3+ZbCx4eHt5/5+Vpd/45T6nx8PDw3subJL690PNC8E21Fjw8PLyYl3eRPufzkf4eHh4e3rirvlt4zbeHtWjx8PDwDvB65dfe5lFNtat3f3kmHh4e3ioveZmvDlclRYTqaEK1GYaHh4d3jlcN6zrJniTW+TeTbQMPDw9vztsdDkjKB9XrVzekl+8KeHh4eKu86qK80KoPUuHqBhPNRODh4eGNedXWVLUgW03Btx70H/9JPDw8vDFvK6DqjaupebX4i4eHh3eOt1tazUvAeUJcvVq5Mo2Hh4fXv85ogZ40sZIScFS67VV/8fDw8OKY84V+3uLKl/JJmv5ypgwPDw/vMC9vTVUHoZIUPHko0faAh4eHd4BXTaMno1TJWFVe9i2k7Hh4eHirvF4y/SwevQ2ml+5/+ys8PDy8w7wkiN4w1u4oQOF8PDw8vAO8nDTZAKpNssnjjt4b8PDw8Aa8SbO/WjjIi7Y5e6FKjYeHh9efp3pMFus80F7LbWGSCg8PD+8Ab14OyJtn8yQ+L4vg4eHhneDtFhTyYkGSLk+2KDw8PLx7eJOGU288q9rKqo5t4eHh4d3PmxRPk1+rjbRmZw8PDw9vifcsHnm5IS/d9gq+UTx4eHh4B3j5keOT0m0O2xpNwMPDw9vl9S7dC3qSxOfJNx4eHt49vHINY2lAaiEhzqfJ8PDw8N7EqwZRLXaUl/7rdwU8PDy8D+P1hgmSskWevkdDV3h4eHgHeNXmU96IShb9+a/lyQg8PDy8AW8yXNVrUOWjANUY9moYeHh4eL9+/wVsbivwyjyZDgAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'chph个人博客';
            clearTimeout(titleTime);
        } else {
            document.title = 'Welcome to chph's blog';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
