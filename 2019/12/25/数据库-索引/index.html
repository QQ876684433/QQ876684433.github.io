<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>数据库-索引 | 至繁归于至简 - chph&#39;s blog | steve_chph personal website</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="数据库,索引">
    <meta name="description" content="数据库 - 索引 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   索引的概念数据库索引，简称索引，它是由一系列存储在磁盘上的索引项组成，每个索引项的格式是：(keyvalue, row-pointer)：  keyvalue 索引键，由行的某些列（通常是一列）中的值串接而成，是">
<meta name="keywords" content="数据库,索引">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库-索引">
<meta property="og:url" content="http://QQ876684433.github.io/2019/12/25/数据库-索引/index.html">
<meta property="og:site_name" content="至繁归于至简 - chph&#39;s blog">
<meta property="og:description" content="数据库 - 索引 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   索引的概念数据库索引，简称索引，它是由一系列存储在磁盘上的索引项组成，每个索引项的格式是：(keyvalue, row-pointer)：  keyvalue 索引键，由行的某些列（通常是一列）中的值串接而成，是">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2019/12/25/Pqh9pxwyjFeSZtC.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/pu369RmV54PXrxk.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/gJjf1CHya9xkrtN.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/hiF2Q781nOsZKMa.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/78KNgAbwClcRzJS.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/vn5RuSc4seQ6dFX.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/nDh5CBizUeOA7XV.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/CANEXM4jFJZPftD.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/xu8rn4GJDfCycXt.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/eJXpaH5GocqWIFj.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/d51aHty2rRM9JLq.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/GYdMsfLyj5CUz8k.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/NQrqFsU94XwiDJZ.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/J3ZhPuUnDpQyBco.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/ckiIeFx4d8aGUSu.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/e94CBYy2QKPiRm5.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/yVrkUvwDB8hGWYz.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/eXyCL312ONpukb7.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/vhkePjVNqy3G1IS.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/67CDZMr8ojfwib1.png">
<meta property="og:image" content="https://i.loli.net/2019/12/25/pQYI8ZE5WaBTxVm.png">
<meta property="og:updated_time" content="2019-12-25T15:41:01.787Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库-索引">
<meta name="twitter:description" content="数据库 - 索引 参考资料：  南大软件学院课程《数据管理基础》课程资料 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著   索引的概念数据库索引，简称索引，它是由一系列存储在磁盘上的索引项组成，每个索引项的格式是：(keyvalue, row-pointer)：  keyvalue 索引键，由行的某些列（通常是一列）中的值串接而成，是">
<meta name="twitter:image" content="https://i.loli.net/2019/12/25/Pqh9pxwyjFeSZtC.png">
    
        <link rel="alternate" type="application/atom+xml" title="至繁归于至简 - chph&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">steve_chph</h5>
          <a href="mailto:chph13420146901@gmail.com" title="chph13420146901@gmail.com" class="mail">chph13420146901@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/QQ876684433" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://107.182.188.221:23333/"  >
                <i class="icon icon-lg icon-link"></i>
                Projects
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://107.182.188.221:23334/"  >
                <i class="icon icon-lg icon-demo"></i>
                Projects
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">数据库-索引</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="検索">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">数据库-索引</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-12-25T03:19:14.000Z" itemprop="datePublished" class="page-time">
  2019-12-25
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/">数据库</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/笔记/">笔记</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#数据库-索引"><span class="post-toc-number">1.</span> <span class="post-toc-text">数据库 - 索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#索引的概念"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">索引的概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL中的索引语句"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">SQL中的索引语句</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#磁盘存储"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">磁盘存储</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据库存储"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">数据库存储</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#磁盘访问"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">磁盘访问</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#内存缓冲区（Memory-Buffer）"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">内存缓冲区（Memory Buffer）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#优点"><span class="post-toc-number">1.2.3.1.</span> <span class="post-toc-text">优点</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在ORACLE中创建表空间"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">在ORACLE中创建表空间</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#表空间（Tablespace）"><span class="post-toc-number">1.2.4.1.</span> <span class="post-toc-text">表空间（Tablespace）</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据存储页面和行指针"><span class="post-toc-number">1.2.5.</span> <span class="post-toc-text">数据存储页面和行指针</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#磁盘页面的行布局"><span class="post-toc-number">1.2.5.1.</span> <span class="post-toc-text">磁盘页面的行布局</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#B-Tree索引"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">B-Tree索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ORACLE中创建索引的语句"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">ORACLE中创建索引的语句</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#B树的结构"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">B树的结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#B树节点的结构"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">B树节点的结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何创建一个索引"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">如何创建一个索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Fanout-f-of-B-Tree"><span class="post-toc-number">1.3.4.1.</span> <span class="post-toc-text">Fanout f of B-Tree</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#B树的深度"><span class="post-toc-number">1.3.4.2.</span> <span class="post-toc-text">B树的深度</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#B树的动态修改"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">B树的动态修改</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#B树（B-树）的属性"><span class="post-toc-number">1.3.6.</span> <span class="post-toc-text">B树（B+树）的属性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#索引节点布局"><span class="post-toc-number">1.3.7.</span> <span class="post-toc-text">索引节点布局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ORACLE中的位图索引（Bitmap-Index）"><span class="post-toc-number">1.3.8.</span> <span class="post-toc-text">ORACLE中的位图索引（Bitmap Index）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#聚簇索引和非聚簇索引"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">聚簇索引和非聚簇索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#聚簇索引的思想"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">聚簇索引的思想</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#聚簇索引和非聚簇索引的比较"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">聚簇索引和非聚簇索引的比较</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#聚簇索引的优点"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">聚簇索引的优点</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#散列主索引"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">散列主索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#思想"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">思想</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在散列聚簇中调整HASHKEYS和SIZE的值"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">在散列聚簇中调整HASHKEYS和SIZE的值</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-数据库-索引"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">数据库-索引</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-12-25 11:19:14" datetime="2019-12-25T03:19:14.000Z"  itemprop="datePublished">2019-12-25</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/">数据库</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/数据库/笔记/">笔记</a></li></ul></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="数据库-索引"><a href="#数据库-索引" class="headerlink" title="数据库 - 索引"></a>数据库 - 索引</h1><blockquote>
<p>参考资料：</p>
<ul>
<li>南大软件学院课程《数据管理基础》课程资料</li>
<li>《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著</li>
</ul>
</blockquote>
<h2 id="索引的概念"><a href="#索引的概念" class="headerlink" title="索引的概念"></a>索引的概念</h2><p>数据库索引，简称索引，它是由一系列存储在磁盘上的索引项组成，每个索引项的格式是：(keyvalue, row-pointer)：</p>
<ul>
<li><p>keyvalue</p>
<p>索引键，由行的某些列（通常是一列）中的值串接而成，是用于查找的</p>
</li>
<li><p>row-pointer（ROWID）</p>
<p>行指针，指向行所在的的磁盘位置（一次I/O）</p>
</li>
</ul>
<p>索引项存储在磁盘上，通常是<strong>按照索引键的字典序以“B-tree”的形式排序的</strong>（有时候也按散列访问）</p>
<p>索引可以被看成是具有两列的表：keyvalue和row-pointer</p>
<h3 id="SQL中的索引语句"><a href="#SQL中的索引语句" class="headerlink" title="SQL中的索引语句"></a>SQL中的索引语句</h3><p>创建一个索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">UNIQUE</span> ] <span class="keyword">INDEX</span> indexname</span><br><span class="line">    <span class="keyword">ON</span> tablename (colname [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>]</span><br><span class="line">    	&#123; , colname [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>] ...&#125;);</span><br></pre></td></tr></table></figure>

<p>删除一个索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> indexname;</span><br></pre></td></tr></table></figure>

<p>表名必须是一个发出该语句时已经存在的基本表，指定的列名必须是没有被限定的</p>
<ul>
<li><p>UNIQUE</p>
<ul>
<li><p>UNIQUE子句指定索引中存放的<strong>索引键值必须是唯一的</strong>，除非有一个串接到键值的列是空值：这种情况下重复键值是允许的</p>
</li>
<li><p>keyvalue和row是一对一的（one-to-one）</p>
</li>
<li><p>我们可以使用UNIQUE INDEX来实现CREATE TABLE语句中的UNIQUE约束条件</p>
</li>
</ul>
</li>
</ul>
<p>例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> citiesx <span class="keyword">on</span> customers(city);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>each index key value (i.e., city name) in the citiesx index can correspond to a large number of different customers rows</p>
<p>citiesx索引中的每一个索引键值（例如city名）都对应于customers表中的很多行</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> cidx <span class="keyword">on</span> customers(cid);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>each index key value in the cidx index only correspond to a customers rows</p>
<p>索引键和表键是不同的：</p>
<ul>
<li><p>索引键是根据一些列按特定的顺序创建的，而关系键中列是没有顺序的</p>
</li>
<li><p>索引键是为了能够更有效地查找数据，如果不使用UNIQUE子句，那么同一个索引键值可以对应与表中的多个行</p>
</li>
</ul>
<p>可以通过UNIQUE INDEX和NOT NULL来实现主键或者候选键：</p>
<ul>
<li>在这个例子中，当索引cidx第一次被创建的时候，系统将测试customers表中是否存在重复的cid值，<strong>如果存在重复值（重复的空值除外），那么索引将不会被创建</strong>；当索引创建完毕后，对该表的所有的更新操作将会对该索引产生影响：<strong>任何可能造成重复索引键值的插入或者更新操作都会被拒绝执行</strong></li>
</ul>
<p>当然主键和UNIQUE的唯一性约束比通过索引进行唯一性约束要好</p>
</li>
</ul>
<p>当索引被创建完成之后，索引会被排序然后存放在磁盘上</p>
<ul>
<li>Sort is <strong>by column value asc or desc</strong>, as in SORT BY description of Select statement</li>
</ul>
<p>后续对表的修改都会立即反映到索引上，而无需重新创建索引</p>
<h2 id="磁盘存储"><a href="#磁盘存储" class="headerlink" title="磁盘存储"></a>磁盘存储</h2><h3 id="数据库存储"><a href="#数据库存储" class="headerlink" title="数据库存储"></a>数据库存储</h3><ul>
<li><p>计算机内存</p>
<p>速度很快，但是具有挥发性的存储</p>
</li>
<li><p>磁盘存储</p>
<p>速度很慢，但是非挥发性的存储，而且很廉价</p>
</li>
</ul>
<h3 id="磁盘访问"><a href="#磁盘访问" class="headerlink" title="磁盘访问"></a>磁盘访问</h3><ul>
<li><p>寻道时间</p>
<p>磁盘臂移动到指定柱面的时间</p>
</li>
<li><p>旋转延迟</p>
<p>磁盘旋转到指定的扇区的时间</p>
</li>
<li><p>传输时间</p>
<p>磁盘臂读写相应表面上的磁盘页面的时间</p>
</li>
</ul>
<h3 id="内存缓冲区（Memory-Buffer）"><a href="#内存缓冲区（Memory-Buffer）" class="headerlink" title="内存缓冲区（Memory Buffer）"></a>内存缓冲区（Memory Buffer）</h3><ul>
<li>数据库系统按照给定的磁盘页面地址（dp表示）读取磁盘页面，并把这些磁盘页面存放到内存的缓冲区中以便后续访问<ul>
<li>一旦磁盘臂移动到了磁盘上的正确位置，传输速度是很快的，磁盘访问时间主要是<strong>移动磁盘臂到指定位置所需的时间</strong></li>
</ul>
</li>
<li>磁盘页面地址（dp）可以是连续的整数（1,2,3, …），也可以由设备号、柱面号、磁盘表面号和开始扇区地址组成</li>
<li>每一个读入到页面在一个称为<strong>散列后备表（Hash Lookaside Table）</strong>的结构里都有一个对应的项，<strong>该项指向了该页面在缓冲区中的位置</strong></li>
<li>每一次读取页面的时候，我们<strong>首先对页面地址做散列操作（h(dp)）</strong>，然后在散列后备表中查询该页面是否已经在缓冲区中：<ul>
<li>如果该页面已经在缓冲区中，那么我们将忽略磁盘访问这一步骤</li>
<li>否则，我们将在缓冲区中找到一个页面，让新读入的页面替换它；我们将替换成长时间不使用的页面，以便缓冲区中的页面总是经常被使用的页面</li>
</ul>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/Pqh9pxwyjFeSZtC.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/pu369RmV54PXrxk.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>减少磁盘I/O操作</li>
<li>在等待磁盘I/O的时候可以让CPU区干其他事情<ul>
<li>这是分时多用户系统的优点之一</li>
<li>可以在等待磁盘I/O的时候让CPU为其他用户服务</li>
</ul>
</li>
</ul>
<h3 id="在ORACLE中创建表空间"><a href="#在ORACLE中创建表空间" class="headerlink" title="在ORACLE中创建表空间"></a>在ORACLE中创建表空间</h3><h4 id="表空间（Tablespace）"><a href="#表空间（Tablespace）" class="headerlink" title="表空间（Tablespace）"></a>表空间（Tablespace）</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/gJjf1CHya9xkrtN.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<ul>
<li>表空间是ORACLE数据库基本的分配介质（ORACLE数据库中包含多个表空间），它代表了一块可以使用的磁盘空间，这块磁盘空间可能会跨多个磁盘设备</li>
<li>所有请求磁盘空间的<strong>表、索引和其他对象</strong>都在表空间中收到分配给它们的空间</li>
<li>表空间对应于<strong>一个或多个操作系统文件</strong>，也可以跨越多个磁盘设备</li>
<li>SYSTEM表空间是在CREATE DATABASE时系统自动创建的</li>
<li>大型系统上创建多个表空间的优点：<ul>
<li>可以让不同的磁盘设备作不同用处</li>
<li>如果卸下某个磁盘，不会影响整个数据库</li>
</ul>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/hiF2Q781nOsZKMa.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="数据存储页面和行指针"><a href="#数据存储页面和行指针" class="headerlink" title="数据存储页面和行指针"></a>数据存储页面和行指针</h3><ul>
<li><p>在大多数的架构中，一行是一个连续存储的字节序列，N行被放置在同一页中（在ORACLE中被称为块BLOCK）；每一行<strong>由包含了列值的连续的字节组成</strong>，并且<strong>每一行与页面开始位置的偏移量都是已知的</strong></p>
<p><img src="https://i.loli.net/2019/12/25/78KNgAbwClcRzJS.png" alt></p>
</li>
<li><p>头信息（Header Info，通常称为页面头）包含了显示页面地址的字段、段的类型（索引段或者表数据段）</p>
<p>Header info names the kind of page (data segment, index segment), and the page number (in ORACLE the OS file and page number)</p>
</li>
</ul>
<h4 id="磁盘页面的行布局"><a href="#磁盘页面的行布局" class="headerlink" title="磁盘页面的行布局"></a>磁盘页面的行布局</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/vn5RuSc4seQ6dFX.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>页面中的行：</p>
<ul>
<li>行是从页面（或者块）的右端开始存储，并且添加顺序是从右往左</li>
<li>行目录项是在头信息后面开始，从左往右添加；行目录里的实体给每个行和行槽编号，并<strong>存放对应行在页面中的偏移量</strong><ul>
<li>当新的一行添加的时候，它需要立即告知是否有足够的磁盘空间来容纳新的行和新的行目录</li>
<li>页面的空闲位置在页面中间连续部分，如果在磁盘页面上删除一行并回收它所用的空间，<strong>剩下的行会向右移动</strong>，而<strong>行目录会向左移动</strong>，这样空闲空间仍然在中间部分<ul>
<li>Also might have “<strong>Table Directory</strong>“ in block when have CLUSTER.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>磁盘指针</strong>（Disk Pointer，或者称为<strong>行指针，</strong>ROWID）：</p>
<ul>
<li><p>数据表中的行可以被行出现的<strong>磁盘页面地址（page number，P）</strong>和<strong>该页面中行的槽号（slot number，S）</strong>唯一标识</p>
<p>A row in a table can be uniquely specified with the page number (P) and slot number (S)</p>
</li>
</ul>
<p><strong>Rows Extending Over Several Pages</strong>：一个数据表的行可以存放在多个磁盘页面中</p>
<h2 id="B-Tree索引"><a href="#B-Tree索引" class="headerlink" title="B-Tree索引"></a>B-Tree索引</h2><p>B树是一种键控索引结构，它是存储在磁盘上的，对于B树的每一个节点:</p>
<ul>
<li>它占一整个磁盘页面</li>
<li>has a lot of fanout，有很多扇出（？什么意思）</li>
</ul>
<h3 id="ORACLE中创建索引的语句"><a href="#ORACLE中创建索引的语句" class="headerlink" title="ORACLE中创建索引的语句"></a>ORACLE中创建索引的语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">UNIQUE</span> | <span class="keyword">BITMAP</span> ] <span class="keyword">INDEX</span></span><br><span class="line">    [schema.]indexname <span class="keyword">ON</span> tablename</span><br><span class="line">    ( colname [ <span class="keyword">ASC</span> | <span class="keyword">DESC</span> ]</span><br><span class="line">    	&#123; , colname [ <span class="keyword">ASC</span> | <span class="keyword">DESC</span> ] … &#125; )</span><br><span class="line">    [ <span class="keyword">TABLESPACE</span> tblespace ] [ <span class="keyword">STORAGE</span> . . . ]</span><br><span class="line">    [ PCTFREE n ] [ ...... ]</span><br><span class="line">    [ NOSORT ]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>UNIQUE | BITMAP</p>
</li>
<li><p>ASC | DESC</p>
</li>
<li><p>TABLESPACE</p>
</li>
<li><p>PCTFREE</p>
</li>
<li><p>NOSORT</p>
<p>表明表中的行已经按索引的键值排序并按此顺序存放在磁盘上了；因此可以通过连续访问表中的行得到升序的索引项，所以排序的步骤花费的时间就省下了；ORACLE将检查键值是否真的按升序排序，如果不是则将返回一个错误的代码</p>
</li>
</ul>
<p>创建索引的过程：</p>
<ul>
<li><p>读取磁盘上的所有行（假设为N）</p>
</li>
<li><p>为每一行计算出(keyvalue, rowid)对</p>
</li>
<li><p>将下面的列表按照keyvals排序然后存放在磁盘上</p>
<p>(keyval1, rowid1) (keyval2, rowid2) . . . (keyvalN, rowidN)</p>
</li>
</ul>
<p>如果有NOSORT子句，那么行已经处于正确的顺序，因此不需要排序</p>
<p>例子：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/nDh5CBizUeOA7XV.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="B树的结构"><a href="#B树的结构" class="headerlink" title="B树的结构"></a>B树的结构</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/CANEXM4jFJZPftD.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="B树节点的结构"><a href="#B树节点的结构" class="headerlink" title="B树节点的结构"></a>B树节点的结构</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/xu8rn4GJDfCycXt.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/eJXpaH5GocqWIFj.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>例子：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/d51aHty2rRM9JLq.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/GYdMsfLyj5CUz8k.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="如何创建一个索引"><a href="#如何创建一个索引" class="headerlink" title="如何创建一个索引"></a>如何创建一个索引</h3><ul>
<li>将叶子节点上的所有索引项排序</li>
<li>创建目录以及目录的目录</li>
</ul>
<h4 id="Fanout-f-of-B-Tree"><a href="#Fanout-f-of-B-Tree" class="headerlink" title="Fanout f of B-Tree"></a>Fanout f of B-Tree</h4><p>B树节点中含有的最大索引项数目f</p>
<h4 id="B树的深度"><a href="#B树的深度" class="headerlink" title="B树的深度"></a>B树的深度</h4><p>如果所有的行数是N，那么$depth = log_f(N)$</p>
<h3 id="B树的动态修改"><a href="#B树的动态修改" class="headerlink" title="B树的动态修改"></a>B树的动态修改</h3><p>Insert following key values into BTree ( n = 3 ):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7, 96, 41, 39, 88, 65, 55, 62</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/NQrqFsU94XwiDJZ.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="B树（B-树）的属性"><a href="#B树（B-树）的属性" class="headerlink" title="B树（B+树）的属性"></a>B树（B+树）的属性</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/J3ZhPuUnDpQyBco.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="索引节点布局"><a href="#索引节点布局" class="headerlink" title="索引节点布局"></a>索引节点布局</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/ckiIeFx4d8aGUSu.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="ORACLE中的位图索引（Bitmap-Index）"><a href="#ORACLE中的位图索引（Bitmap-Index）" class="headerlink" title="ORACLE中的位图索引（Bitmap Index）"></a>ORACLE中的位图索引（Bitmap Index）</h3><p>如果有多个行有重复键值的时候，就可以使用位图索引了</p>
<p>位图的思想：</p>
<ul>
<li><p>有N个行的表中每一行都有一个原始编号，依次是0,1,2, …, N-1（连续编号的行在磁盘上是物理连续的，而且一定有一个函数能进行原始编号到ROWID的转换）</p>
</li>
<li><p>位图是一个有N位的序列（每一位的值是0或者1），位图能表示任何一个ROWID的列表L：</p>
<ul>
<li><p>如果原始编号为k的ROWID值在列表L中，那么N位位图的第k位被设置为1，否则被设置为0</p>
</li>
<li><p>例如：</p>
<p><img src="https://i.loli.net/2019/12/25/e94CBYy2QKPiRm5.png" alt></p>
</li>
</ul>
</li>
</ul>
<p>位图索引例子：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/yVrkUvwDB8hGWYz.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>



<h2 id="聚簇索引和非聚簇索引"><a href="#聚簇索引和非聚簇索引" class="headerlink" title="聚簇索引和非聚簇索引"></a>聚簇索引和非聚簇索引</h2><h3 id="聚簇索引的思想"><a href="#聚簇索引的思想" class="headerlink" title="聚簇索引的思想"></a>聚簇索引的思想</h3><p>所引用的行和键值顺序一样的索引被称为<strong>聚簇索引（clustered index）</strong></p>
<ul>
<li>在大多数数据库中，磁盘上数据页中的行是按照加载或者插入的顺序来存放的</li>
</ul>
<h3 id="聚簇索引和非聚簇索引的比较"><a href="#聚簇索引和非聚簇索引的比较" class="headerlink" title="聚簇索引和非聚簇索引的比较"></a>聚簇索引和非聚簇索引的比较</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/eXyCL312ONpukb7.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h3 id="聚簇索引的优点"><a href="#聚簇索引的优点" class="headerlink" title="聚簇索引的优点"></a>聚簇索引的优点</h3><p>当所需要的行彼此之间很靠近的时候，这些查询可以更有效地执行；因为要查询的平均行只是一个页面中的很小的一部分，所有如果行是聚簇在一起的，那么我们<strong>只要读出含有一个所需行的那一个页面，其他所需行就可能位于同一页面上</strong>，这样就可以减少I/O的次数</p>
<h2 id="散列主索引"><a href="#散列主索引" class="headerlink" title="散列主索引"></a>散列主索引</h2><h3 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h3><p>散列聚簇中的表的行是通过一个哈希函数存放在伪随机的数据槽中的，并且以相同的方式访问，通常只需要一次I/O操作；因此也不会按照keyvalue进行排序</p>
<ul>
<li>这样连续的keyvals并不存放在一起，并且很有可能存放在完全不同的磁盘数据页中，取决于哈希函数</li>
</ul>
<img src="https://i.loli.net/2019/12/25/vhkePjVNqy3G1IS.png" style="zoom:67%;">

<h3 id="在散列聚簇中调整HASHKEYS和SIZE的值"><a href="#在散列聚簇中调整HASHKEYS和SIZE的值" class="headerlink" title="在散列聚簇中调整HASHKEYS和SIZE的值"></a>在散列聚簇中调整HASHKEYS和SIZE的值</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/67CDZMr8ojfwib1.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>简单来说就是：</p>
<ul>
<li>槽的总数：S</li>
<li>每个磁盘块上的槽的个数：B</li>
<li>那么需要分配的磁盘块的个数为：S/B</li>
</ul>
<p>冲突（collision）：</p>
<ul>
<li>两个不同的键值的哈希计算结果是同一个槽号</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2019/12/25/pQYI8ZE5WaBTxVm.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>


        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最終更新：<time datetime="2019-12-25T15:41:01.787Z" itemprop="dateUpdated">2019-12-25 23:41:01</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2019/12/25/数据库-索引/" target="_blank" rel="external">http://QQ876684433.github.io/2019/12/25/数据库-索引/</a>
        
    </div>
    
    <footer>
        <a href="http://QQ876684433.github.io">
            <img src="/img/avatar.jpg" alt="steve_chph">
            steve_chph
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/索引/">索引</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&title=《数据库-索引》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&title=《数据库-索引》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/25/数据库-索引/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库-索引》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/12/25/数据库-更新事务/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">数据库-更新事务</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/12/23/软件系统设计复习 - Part2/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">软件系统设计复习 - Part2</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢你~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>このブログの内容物は<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際ライセンスの下に提供されています</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>steve_chph &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&title=《数据库-索引》 — 至繁归于至简 - chph's blog&pic=http://QQ876684433.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&title=《数据库-索引》 — 至繁归于至简 - chph's blog&source=the blog website of steve_chph, steve_chph的个人博客网站" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://QQ876684433.github.io/2019/12/25/数据库-索引/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库-索引》 — 至繁归于至简 - chph's blog&url=http://QQ876684433.github.io/2019/12/25/数据库-索引/&via=http://QQ876684433.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://QQ876684433.github.io/2019/12/25/数据库-索引/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJklEQVR42u3aS24DIRAFwNz/0o6UlSUrzOsGOxkoVpZlz1AsWvTn6ytej5/1/Pl15b98/s34XYsXBgbGbRnJy8bfvL442egYXz4IDAyMAxh5kM23Ul1j0sWeMTAwMFpb/O354zCNgYGBMc/Ikflz/iDgYmBg3JDRK6KNH11NjD+Ui2NgYNyQ0WsMfObz2/sbGBgY/57RK4dVnzYOr/OlOgwMjL0Z42ZkrwyXp8FJKzRpf2JgYJzAmBn8SgpnedhNjqNQO8TAwNiI0StjJf/KS2nJUV68FwMD42BG3gZIgnW1RVoI/RgYGJsyqilocwxi4vIX4TEwMLZm9EJn9QJX/WbqaoiBgbEpoxcWq4F11WGVwzQGBsZGjJmy/juujM2WJwYGxnaMmdJYNUT2ynPRkWFgYGzNSAYg8vL9+xoGUbsCAwPjGMZMWT9JMnN2cj3FwMA4jdGc1JhGJsG3MDOCgYGxKWNVUawXXpODW9DTwMDA2I5RHYmojkck19Dk9xcBFwMDYwtGz7psmiNOUy+uhhgYGMcwki1Wm4ureBd7wMDA2JpRLWz1LoXlZuTM6BgGBsZ2jEdxVV8Tnd9EqMXAwDiBka9eittrKlQbCRgYGCcw8sJW3qTMRyjygIuBgYFRDY7zgxGrrp4YGBgYeRCcKevPHCUGBgZGvq1qaC5n0uPLJQYGxgGMPIntpaDz7c/FuTgGBsatGKsaA3lIzRnLABgYGHdlfAMcYDzingn1tgAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'chph个人博客';
            clearTimeout(titleTime);
        } else {
            document.title = 'Welcome to chph's blog';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
