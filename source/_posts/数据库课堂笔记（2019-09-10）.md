---
title: 数据库课堂笔记（2019-09-10）
date: 2019-09-10 11:25:09
categories:
- 数据库
- 笔记
tags:
- 数据库
---

# 数据库课堂笔记

> 参考资料：
>
> - 南大软件学院课程《数据管理基础》课程资料
> - 《数据库原理、编程与性能》原书第二版 - Patrick O‘Neil、Elizabeth O’Neil 著
> - 《数据库系统概论》第五版 - 王珊 萨师煊 著
> - 《数据库系统概念》



## 数据库课堂笔记（2019-09-10）

### Ch2. The Relational Model

#### 键、超键和空值（Keys，Superkeys，and Null Values）

##### 键（Keys）

![](https://i.loli.net/2019/09/15/oAfCMukbUgwaRxv.png)

条件1说明了任意一行u在属性集K上的值是唯一的；**表可能具有不止一个键**；关系规则3保证了所有列的集合可以唯一区分任意两行，因此**关系中至少存在一个键**

![](https://i.loli.net/2019/09/15/meGc57MyshgdLJ9.png)

![](https://i.loli.net/2019/09/15/RzwquBxEKGfOMIn.png)

##### 超键（Superkeys）

![](https://i.loli.net/2019/09/15/S3cbnm4Kv1Q9qaG.png)

属性集是不是键或者超键，取决于“设计者的意图”，有时候某些属性集在特定时刻它满足条件1，但是可能随着时间的改变，很有可能不再满足该条件，这样的属性集不是键或者超键

**空集既不是超键也不是键**，因为属性集为空集时无法唯一确定某一行，因为所有行在空集上的取值都是空集

##### 候选键和主键（Candidate Key & Primary Key）

![](https://i.loli.net/2019/09/15/46FHld1hWT7RkrV.png)

- 主键是数据库设计者从候选键中选择出来，用来唯一确定数据表某一行的键

  ![](https://i.loli.net/2019/09/15/igh9kcW6peAYPBF.png)

- 它有可能被其他表用来作为**对当前表特定行的引用**来使用

  ![](https://i.loli.net/2019/09/15/KgdHEksYv37O1fA.png)

##### 空值（Null Values）

- 空值应该被解释为**未知的或者尚未定义的**，意思是当我们**以后知道更多情况的时候会重新填写该值。**

  > A null value is placed in a field of a table when a specific value is either **unknown or inappropriate**.

- 要注意的是：<u>空值和数字0（对于数值属性）或者是空串（对于字符串属性）是不同的</u>

- **主键不能包含空值**，因为表的主键是唯一区分表的单独行的，在还没确定主键的值之前，该行是不允许被存储到数据表中的

  ![](https://i.loli.net/2019/09/15/jYNURDvFofVLiq6.png)

  实体完整性规则与3NF等价

- **空值无法与任何非空值进行比较**，用属性的非空值作为条件进行查询，永远也无法查询到该属性为空值的所在行



#### 关系代数（Relational Algebra）

关系代数可以看作根据查询结果来生成新表的方法的集合，这些方法称为**关系代数运算**。

关系代数的运算分为两种类型：

- **集合论运算**：以行为元素单位进行的集合运算

  ![](https://i.loli.net/2019/09/17/13qwasP9bMj8XuW.png)

- **自然关系运算**：基于行的结构的运算

  ![](https://i.loli.net/2019/09/17/orM4PlgVREWiFK9.png)



##### **相容表（兼容表）**

当表R和S有相同的表头（表标题），那么表R和表S是相容表，即：

![](https://i.loli.net/2019/09/17/JmI3rojPadZEAs6.png)

相同的表头的含义：相同数量的属性、属性对的域相同、属性对有相同的名字

ps：关系型数据库中，两列有相同的含义意思是**他们有相同的列名（属性名）**；同时**属性集是无序**的，因此两个数据表的表头中属性顺序不一致，并不影响它们是相容表

![](https://i.loli.net/2019/09/17/KlgNfBErdzQ1oSk.png)



##### **交、并、差**

![](https://i.loli.net/2019/09/17/3nQBH1dKpTbiy8f.png)

并（UNION）和交（INTERACTION）是满足**交换律**和**结合律**的；差（DIFFERENCE）不满足**交换律**

##### **赋值、别名**

![](https://i.loli.net/2019/09/17/i8kaOMNA1heVzu2.png)

S为表R的别名，简写为`S:=R`，通常用于：“关系自身的连接运算”、用来保存计算的“中间结果”。

##### **乘积运算（R×S）**

乘积运算是基于集合运算中的笛卡尔积的，它可以允许我们建立一个包含两个表中行之间所有可能的相互联系的新表。

![](https://i.loli.net/2019/09/17/UbSqeLfFAyH1wxO.png)

![](https://i.loli.net/2019/09/17/eLwW2dxrtYy5sKk.png)

我们可以使用相对较小的表来构造大表，例如1000行的表的积可以有100万行

当要计算表与自身的乘积时，会存在限定符名重复的问题，例如乘积R×R是不允许的，我们**可以通过使用表的别名来避免**，例如S:=R，那么R与自身的乘积可以表示为：R×S

##### 自然关系运算

![](https://i.loli.net/2019/09/17/E3XRvUaQdhzOAmi.png)

用关系代数表达式回答用自然语言表达的对数据的查询要求，我们称这样的表达式为**关系代数查询**，简称为查询

- **投影运算（project）**

  ![](https://i.loli.net/2019/09/17/u9waNYiOZhQ4ARj.png)

  ![](https://i.loli.net/2019/09/17/COaoQDtgiY9Sb8e.png)

  投影运算实际上是在表中选择列的运算，运算结果其实是新的表，因此它会**将重复的行删除**，以保证任意两行是不一样的

- **选择运算（selection）**

  从给定的表中选择出满足特定准则的行来构成新的表

  ![](https://i.loli.net/2019/09/17/oyprhnLcR7Y2JtQ.png)

  - C是比较表达式，比较符号有：`<, >, =, <=, >=, 和<>`，其中`<>`为不等符号，类似于`!=`

  - 如果比较的条件中有字符常量，那么要使用引号，例如`city='Dallas'`，其中字符常量是按照字典顺序来比较的

  - 比较条件可以是复合表达式，例如`C AND C'`等

    ![](https://i.loli.net/2019/09/17/k7g5TqnPr6dHlFs.png)

  进行选择运算时要避免**内容依赖**的问题：即对于某个特定时刻表的内容，两个查询结果相同还不足以保证这两个查询表达式是等价的，他们必须要求对于所有可能的表的内容都给出相同的结果

- 关系代数的优先级

  ![](https://i.loli.net/2019/09/17/K2vSMUuGefiLXb6.png)

  

  










